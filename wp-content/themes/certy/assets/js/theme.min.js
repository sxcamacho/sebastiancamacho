function ace_detect_device_type(){/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?(ace.mobile=!0,ace.html.addClass("crt-mobile")):(ace.mobile=!1,ace.html.addClass("crt-desktop"))}function ace_append_overlay(){ace.body.append(ace.overlay.obj),ace.overlay.obj[0].style.opacity=0,window.getComputedStyle(ace.overlay.obj[0]).opacity,ace.overlay.obj[0].style.opacity=1}function ace_remove_overlay(){ace.overlay.obj[0].style.opacity=0,ace.overlay.obj.remove()}function ace_lock_scroll(){var e=ace.html.outerWidth(),t=ace.body.outerHeight(),o=[self.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft,self.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop];ace.html.data("scroll-position",o),ace.html.data("previous-overflow",ace.html.css("overflow")),ace.html.css("overflow","hidden"),window.scrollTo(o[0],o[1]);var r=ace.body.outerWidth()-e,i=ace.body.outerHeight()-t;ace.body.css({"margin-right":r,"margin-bottom":i}),ace.html.addClass("crt-lock-scroll")}function ace_unlock_scroll(){ace.html.css("overflow",ace.html.data("previous-overflow"));var e=ace.html.data("scroll-position");window.scrollTo(e[0],e[1]),ace.body.css({"margin-right":0,"margin-bottom":0}),ace.html.removeClass("crt-lock-scroll")}function ace_open_sidebar(){ace.html.addClass("crt-sidebar-opened"),ace_append_overlay(),ace_lock_scroll()}function ace_close_sidebar(){ace.html.removeClass("crt-sidebar-opened"),ace_remove_overlay(),ace_unlock_scroll()}function ace_progress_chart(e,t,o,r){void 0===t&&(t=""),new ProgressBar.Circle(e,{color:certy.vars.themeColor,strokeWidth:5,trailWidth:0,text:{value:t,className:"progress-text",style:{top:"50%",left:"50%",color:certy.progress.textColor,position:"absolute",margin:0,padding:0,transform:{prefix:!0,value:"translate(-50%, -50%)"}},autoStyleContainer:!0,alignToBottom:!0},svgStyle:{display:"block",width:"100%"},duration:r,easing:"easeOut"}).animate(o)}function ace_progress_line(e,t,o,r){void 0===t&&(t=""),new ProgressBar.Line(e,{strokeWidth:4,easing:"easeInOut",duration:r,color:certy.vars.themeColor,trailColor:certy.progress.trailColor,trailWidth:4,svgStyle:{width:"100%",height:"100%"},text:{value:t,className:"progress-text",style:{top:"-25px",right:"0",color:certy.progress.textColor,position:"absolute",margin:0,padding:0,transform:{prefix:!0,value:"translate(0, 0)"}},autoStyleContainer:!0}}).animate(o)}function ace_is_elem_in_viewport(e,t){var o=e[0].getBoundingClientRect();return o.bottom>=0&&o.right>=0&&o.top+t<=(window.innerHeight||document.documentElement.clientHeight)&&o.left<=(window.innerWidth||document.documentElement.clientWidth)}function ace_is_elems_in_viewport(e,t){for(var o=0;o<e.length;o++){var r=jQuery(e[o]);if(r.hasClass("crt-animate")&&ace_is_elem_in_viewport(r,t)){if(r.removeClass("crt-animate").addClass("crt-animated"),r.hasClass("progress-chart")){var i=r.find(".progress-bar");ace_progress_chart(i[0],i.data("text"),i.data("value"),1e3)}if(r.hasClass("progress-line")){var s=r.find(".progress-bar");ace_progress_line(s[0],s.data("text"),s.data("value"),1e3)}}}}function ace_appear_elems(e,t){ace_is_elems_in_viewport(e,t),jQuery(window).scroll(function(){ace_is_elems_in_viewport(e,t)}),jQuery(window).resize(function(){ace_is_elems_in_viewport(e,t)})}function initialiseGoogleMap(e){var t,o=44.5403,r=-78.5463,i=jQuery("#map"),s=i.get(0),a=jQuery.parseJSON(e);i.data("latitude")&&(o=i.data("latitude")),i.data("longitude")&&(r=i.data("longitude")),t=new google.maps.LatLng(o,r);var n={zoom:14,center:t,scrollwheel:!0,mapTypeId:google.maps.MapTypeId.ROADMAP,styles:a};i=new google.maps.Map(s,n);new google.maps.Marker({map:i,position:t,icon:{path:"M125 410 c-56 -72 -111 -176 -120 -224 -7 -36 11 -83 49 -124 76 -85 223 -67 270 31 28 60 29 88 6 150 -19 51 -122 205 -148 221 -6 3 -32 -21 -57 -54z m110 -175 c35 -34 33 -78 -4 -116 -35 -35 -71 -37 -105 -7 -40 35 -43 78 -11 116 34 41 84 44 120 7z",fillColor:certy_vars_from_WP.themeColor,fillOpacity:1,scale:.1,strokeColor:certy_vars_from_WP.themeColor,strokeWeight:1,anchor:new google.maps.Point(185,500)},title:"Hello World!"});google.maps.event.addDomListener(window,"resize",function(){i.setCenter(t)})}var navStiky=!1;1==certy_vars_from_WP.enable_sticky&&(navStiky=!0);var certy={vars:{rtl:!1,themeColor:certy_vars_from_WP.themeColor,screenMd:"992px"},nav:{height:"auto",arrow:!1,sticky:{top:"-1px",active:navStiky},tooltip:{active:!0}},sideBox:{sticky:{top:"20px",active:!1}},progress:{animation:!0,textColor:"inherit",trailColor:"rgba(0,0,0,0.07)"}};!function(e,t,o,r){var i=function(r,i){this.elem=r,this.$elem=e(r),this.options=i,this.metadata=this.$elem.data("plugin-options"),this.$win=e(t),this.sections={},this.didScroll=!1,this.$doc=e(o),this.docHeight=this.$doc.height()};i.prototype={defaults:{navItems:"a",currentClass:"current",changeHash:!1,easing:"swing",filter:"",scrollSpeed:750,scrollThreshold:.5,begin:!1,end:!1,scrollChange:!1},init:function(){return this.config=e.extend({},this.defaults,this.options,this.metadata),this.$nav=this.$elem.find(this.config.navItems),""!==this.config.filter&&(this.$nav=this.$nav.filter(this.config.filter)),this.$nav.on("click.onePageNav",e.proxy(this.handleClick,this)),this.getPositions(),this.bindInterval(),this.$win.on("resize.onePageNav",e.proxy(this.getPositions,this)),this},adjustNav:function(e,t){e.$elem.find("."+e.config.currentClass).removeClass(e.config.currentClass),t.addClass(e.config.currentClass)},bindInterval:function(){var e,t=this;t.$win.on("scroll.onePageNav",function(){t.didScroll=!0}),t.t=setInterval(function(){e=t.$doc.height(),t.didScroll&&(t.didScroll=!1,t.scrollChange()),e!==t.docHeight&&(t.docHeight=e,t.getPositions())},250)},getHash:function(e){return e.attr("href").split("#")[1]},getPositions:function(){var t,o,r,i=this;i.$nav.each(function(){t=i.getHash(e(this)),r=e("#"+t),r.length&&(o=r.offset().top,i.sections[t]=Math.round(o))})},getSection:function(e){var t=null,o=Math.round(this.$win.height()*this.config.scrollThreshold);for(var r in this.sections)this.sections[r]-o<e&&(t=r);return t},handleClick:function(o){var r=this,i=e(o.currentTarget),s=i.parent(),a="#"+r.getHash(i);s.hasClass(r.config.currentClass)||(r.config.begin&&r.config.begin(),r.adjustNav(r,s),r.unbindInterval(),r.scrollTo(a,function(){r.config.changeHash&&(t.location.hash=a),r.bindInterval(),r.config.end&&r.config.end()})),o.preventDefault()},scrollChange:function(){var e,t=this.$win.scrollTop(),o=this.getSection(t);null!==o&&(e=this.$elem.find('a[href$="#'+o+'"]').parent(),e.hasClass(this.config.currentClass)||(this.adjustNav(this,e),this.config.scrollChange&&this.config.scrollChange(e)))},scrollTo:function(t,o){var r=e(t).offset().top;r-=e(t).closest(".crt-paper-layers").hasClass("crt-animate")?145:45,e("html, body").animate({scrollTop:r},this.config.scrollSpeed,this.config.easing,o)},unbindInterval:function(){clearInterval(this.t),this.$win.unbind("scroll.onePageNav")}},i.defaults=i.prototype.defaults,e.fn.onePageNav=function(e){return this.each(function(){new i(this,e).init()})}}(jQuery,window,document),certy.initGlobalVars=function(){this.vars.html=jQuery("html"),this.vars.body=jQuery("body"),this.vars.footer=jQuery("#crt-footer"),this.vars.windowW=jQuery(window).width(),this.vars.windowH=jQuery(window).height(),this.vars.windowScrollTop=jQuery(window).scrollTop(),/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?(this.vars.mobile=!0,this.vars.html.addClass("mobile")):(this.vars.mobile=!1,this.vars.html.addClass("desktop"))},certy.lockScroll=function(){var e=certy.vars.html.outerWidth(),t=certy.vars.body.outerHeight(),o=[self.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft,self.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop];certy.vars.html.data("scroll-position",o),certy.vars.html.data("previous-overflow",certy.vars.html.css("overflow")),certy.vars.html.css("overflow","hidden"),window.scrollTo(o[0],o[1]);var r=certy.vars.body.outerWidth()-e,i=certy.vars.body.outerHeight()-t;certy.vars.body.css({"margin-right":r,"margin-bottom":i}),certy.vars.html.addClass("lock-scroll")},certy.unlockScroll=function(){certy.vars.html.css("overflow",certy.vars.html.data("previous-overflow"));var e=certy.vars.html.data("scroll-position");window.scrollTo(e[0],e[1]),certy.vars.body.css({"margin-right":0,"margin-bottom":0}),certy.vars.html.removeClass("lock-scroll")},certy.nav.initScroll=function(e){e.height(e.height()).animate({height:certy.nav.height},700,function(){e.mCustomScrollbar({axis:"y",scrollbarPosition:"outside"})}),certy.nav.arrow&&(jQuery("#crt-nav-tools").removeClass("hidden"),jQuery("#crt-nav-arrow").on("click",function(){e.mCustomScrollbar("scrollTo","-="+certy.nav.height)}))},certy.nav.exists=!1,certy.nav.makeSticky=function(){this.sticky.active&&!certy.vars.mobile&&Modernizr.mq("(min-width: "+certy.vars.screenMd+")")&&(this.exists?certy.vars.windowScrollTop>this.wrap.offset().top?this.el.css({top:this.sticky.top,left:this.wrap.offset().left,width:this.wrap.width(),bottom:"auto",position:"fixed"}):this.el.css({top:"0",left:"auto",width:"auto",bottom:"auto",position:"relative"}):(this.el=jQuery("#crt-nav-inner"),this.wrap=jQuery("#crt-nav-wrap"),this.el.length>0&&this.wrap.length>0&&(this.exists=!0)))},certy.nav.tooltip.el="",certy.nav.tooltip.timer=0,certy.nav.tooltip.show=function(e){certy.nav.tooltip.timer=setTimeout(function(){certy.nav.tooltip.el=jQuery('<div class="crt-tooltip"></div>');var t=e.offset().top,o=e.offset().left,r=o+e.outerWidth();e.outerWidth();certy.vars.body.append(certy.nav.tooltip.el),certy.nav.tooltip.el.text(e.data("tooltip")),r+certy.nav.tooltip.el.outerWidth()<certy.vars.windowW?certy.nav.tooltip.el.addClass("arrow-left").css({left:r+"px",top:t+4+"px"}):certy.nav.tooltip.el.addClass("arrow-right text-right").css({left:o-certy.nav.tooltip.el.outerWidth()-10+"px",top:t+4+"px"}),certy.nav.tooltip.el.fadeIn(150)},150)},certy.nav.tooltip.hide=function(){clearTimeout(certy.nav.tooltip.timer),certy.nav.tooltip.el.length>0&&certy.nav.tooltip.el.fadeOut(150,function(){certy.nav.tooltip.el.remove()})},certy.sideBox.exists=!1,certy.sideBox.makeSticky=function(){this.sticky.active&&!certy.vars.mobile&&Modernizr.mq("(min-width: "+certy.vars.screenMd+")")&&(this.exists?certy.vars.windowScrollTop>this.wrap.offset().top?this.el.css({top:this.sticky.top,left:this.wrap.offset().left,width:this.wrap.width(),bottom:"auto",position:"fixed"}):this.el.css({top:"0",left:"auto",width:"auto",bottom:"auto",position:"relative"}):(this.el=jQuery("#crt-side-box"),this.wrap=jQuery("#crt-side-box-wrap"),this.el.length>0&&this.wrap.length>0&&(this.exists=!0)))},certy.slider=function(e){for(var t=0;t<e.length;t++)"none"!=jQuery(e[t]).data("init")&&jQuery(e[t]).slick()},certy.carousel=function(e){for(var t=0;t<e.length;t++)"none"!==jQuery(e[t]).data("init")&&jQuery(e[t]).slick({dots:!0})},certy.portfolio={popupSlider:"",popupCarousel:"",currentEmbed:!1,currentEmbedType:!1,initGrid:function(e){var t=e.isotope({isOriginLeft:!certy.vars.rtl,itemSelector:".pf-grid-item",percentPosition:!0,masonry:{columnWidth:".pf-grid-sizer"}});t.imagesLoaded().progress(function(){t.isotope("layout")});var o=e.closest(".pf-wrap").find(".pf-filter");if(o.length>0){var r=o.find("button");jQuery(".pf-filter button:first-child").addClass("active"),r.on("click",function(){r.removeClass("active"),jQuery(this).addClass("active");var e=jQuery(this).attr("data-filter");t.isotope({filter:e})})}},openPopup:function(e){certy.vars.html.addClass("crt-pf-popup-opened"),this.popup_wrapper=jQuery('<div id="pf-popup-wrap"><button id="pf-popup-close"><i class="crt-icon crt-icon-close"></i></button><div class="pf-popup-inner"><div class="pf-popup-middle"><div class="pf-popup-container"><button id="pf-popup-close"><i class="rsicon rsicon-close"></i></button><div id="pf-popup-content" class="pf-popup-content"></div></div></div></div></div>'),certy.vars.body.append(this.popup_wrapper),this.popup_content=jQuery("#pf-popup-content"),this.popup_content.append(e.clone()),this.popupSlider=jQuery("#pf-popup-content .pf-popup-media"),this.popupSlider.on("init",function(e,t){certy.portfolio.loadEmbed(0),jQuery(window).trigger("resize")}),this.popupSlider.on("beforeChange",function(e,t,o,r){if(certy.portfolio.currentEmbed&&certy.portfolio.currentEmbedType)switch(certy.portfolio.currentEmbedType){case"iframe":var i=certy.portfolio.currentEmbed.find("iframe");i.attr("src",i.attr("src"));break;case"video":certy.portfolio.currentEmbed.find("video")[0].pause()}certy.portfolio.loadEmbed(r)}),this.popupSlider.slick({speed:500,dots:!1,arrow:!0,infinite:!1,slidesToShow:1,adaptiveHeight:!0}),this.popupCarousel=jQuery("#pf-popup-content .pf-rel-carousel"),this.popupCarousel.slick({dots:!1,infinite:!0,slidesToShow:3,slidesToScroll:3,lazyLoad:"ondemand"}),this.popup_wrapper.addClass("pf-opened"),certy.lockScroll()},closePopup:function(e){certy.vars.html.removeClass("cr-portfolio-opened"),this.popup_wrapper.removeClass("pf-opened"),setTimeout(function(){certy.portfolio.popup_wrapper.remove(),certy.unlockScroll()},500)},loadEmbed:function(e){var t=jQuery('#pf-popup-content .pf-popup-slide[data-slick-index="'+e+'"]').find(".pf-popup-embed"),o=jQuery.trim(t.data("type")),r=jQuery.trim(t.data("url"));if(certy.portfolio.currentEmbed=t,certy.portfolio.currentEmbedType=o,!t.hasClass("pf-embed-loaded")&&void 0!==o&&o!==!1&&""!==o&&void 0!==r&&r!==!1&&""!==r){var i=jQuery.trim(t.data("width")),s=jQuery.trim(t.data("height"));switch(void 0!==i&&i!==!1&&""!==i&&void 0!==s&&s!==!1&&""!==s&&t.css({"padding-top":s/i*100+"%"}),o){case"image":t.addClass("pf-embed-image");var a=jQuery("<img/>",{src:r,style:"display:none"}).load(function(){jQuery(this).fadeIn(500),t.addClass("pf-embed-loaded")}).error(function(){t.addClass("pf-embed-error")});t.empty().append(a);break;case"iframe":t.addClass("pf-embed-iframe");var n=jQuery("<iframe/>",{src:r,style:"display:none",allowfullscreen:""}).load(function(){jQuery(this).fadeIn(500),t.addClass("pf-embed-loaded")}).error(function(){t.addClass("pf-embed-error")});t.empty().append(n);break;case"video":t.addClass("pf-embed-video");var c=this.parseOptions(r),l="<video ";c.poster&&(l+='poster="'+c.poster+'" '),l+='controls="controls" preload="yes">',c.mp4&&(l+='<source type="video/mp4" src="'+c.mp4+'"/>'),c.webm&&(l+='<source type="video/webm" src="'+c.webm+'"/>'),c.ogv&&(l+='<source type="video/ogg" src="'+c.ogv+'"/>'),l+="Your browser does not support the video tag.</video>",t.empty().append(jQuery(l))}}},parseOptions:function(e){var t,o,r,i,s,a,n,c={};for(s=e.replace(/\s*:\s*/g,":").replace(/\s*,\s*/g,",").split(","),n=0,a=s.length;n<a&&(o=s[n],o.search(/^(http|https|ftp):\/\//)===-1&&o.search(":")!==-1);n++)t=o.indexOf(":"),r=o.substring(0,t),i=o.substring(t+1),i||(i=void 0),"string"==typeof i&&(i="true"===i||"false"!==i&&i),"string"==typeof i&&(i=isNaN(i)?i:+i),c[r]=i;return null==r&&null==i?e:c}},function(e){"use strict";e(function(){certy.initGlobalVars(),certy.vars.body.hasClass("crt-nav-on")&&(Modernizr.mq("(min-width: "+certy.vars.screenMd+")")&&"auto"!==certy.nav.height&&certy.nav.initScroll(e("#crt-nav-scroll")),certy.nav.makeSticky(),certy.nav.tooltip.active&&e("#crt-nav a").hover(function(){certy.nav.tooltip.show(e(this))},function(){certy.nav.tooltip.hide()}),e("#crt-nav").onePageNav({changeHash:!0,scrollThreshold:.5,filter:":not(.external)"})),certy.sideBox.makeSticky();var t=e(".pf-grid");if(t.length>0){for(var o=0;o<t.length;o++)certy.portfolio.initGrid(e(t[o]));e(document).on("click",".pf-project",function(){var t=e(this).attr("href");return certy.portfolio.openPopup(e(t)),!1}),e(document).on("click",".pf-rel-href",function(){var t=e(this).attr("href");if(t.indexOf("#")!=-1)return certy.portfolio.closePopup(),setTimeout(function(){certy.portfolio.openPopup(e(t))},500),!1}),e(document).on("click","#pf-popup-close",function(){certy.portfolio.closePopup()}),e(document).on("touchstart click",".crt-pf-popup-opened #pf-popup-wrap",function(t){var o=e("#pf-popup-content");o.is(t.target)||0!==o.has(t.target).length||certy.portfolio.closePopup()})}certy.slider(e(".cr-slider")),certy.carousel(e(".cr-carousel"));var r=e("#crt-btn-up");r.length>0&&(e(window).scrollTop()>100?r.show(0):r.hide(0),e(window).scroll(function(){e(this).scrollTop()>100?r.show(0):r.hide(0)}),r.on("click",function(){return e("html, body").animate({scrollTop:0},800),!1}))}),e(window).on("resize",function(){certy.vars.windowW=e(window).width(),certy.vars.windowH=e(window).height(),certy.vars.windowScrollTop=e(window).scrollTop(),certy.nav.makeSticky(),certy.sideBox.makeSticky()}),e(window).on("scroll",function(){certy.vars.windowScrollTop=e(window).scrollTop(),certy.nav.makeSticky(),certy.sideBox.makeSticky(),certy.nav.tooltip.el.length>0&&certy.nav.tooltip.el.remove()}),e(window).on("load",function(){})}(jQuery);var ace={html:"",body:"",mobile:"",sidebar:{obj:"",btn:""},nav:{obj:"",tooltip:jQuery('<div class="crt-tooltip"></div>')},overlay:{obj:jQuery('<div id="crt-overlay"></div>')},progress:{lines:"",charts:"",bullets:""}};!function(e){"use strict";e(function(){if(ace.html=e("html"),ace.body=e("body"),ace_detect_device_type(),e("#crt-main-nav-sm .menu-item-has-children > a").on("click touchstart",function(){return!!e(this).hasClass("hover")||(e(this).addClass("hover"),e(this).next().slideDown(500),!1)}),ace.sidebar.obj=e("#crt-sidebar"),ace.sidebar.btn=e("#crt-sidebar-btn"),ace.sidebar.btn.on("touchstart click",function(){ace_open_sidebar()}),e(document).on("touchstart click",".crt-sidebar-opened #crt-overlay",function(e){var t=ace.sidebar.obj;t.is(e.target)||0!==t.has(e.target).length||ace_close_sidebar()}),e("#crt-sidebar-close").on("click",function(){ace_close_sidebar()}),e("#crt-sidebar-inner").mCustomScrollbar({axis:"y",theme:"minimal-dark",autoHideScrollbar:!0,scrollButtons:{enable:!0}}),!certy.progress.animation||ace.mobile){ace.progress.charts=e(".progress-chart .progress-bar");for(var t=0;t<ace.progress.charts.length;t++){var o=e(ace.progress.charts[t]);ace_progress_chart(o[0],o.data("text"),o.data("value"),1)}ace.progress.lines=e(".progress-line .progress-bar");for(var t=0;t<ace.progress.lines.length;t++){var r=e(ace.progress.lines[t]);ace_progress_line(r[0],r.data("text"),r.data("value"),1)}}certy.progress.animation&&!ace.mobile&&ace_appear_elems(e(".crt-animate"),0),e("pre").each(function(e,t){hljs.highlightBlock(t)}),e(".alert .close").on("click",function(){var t=e(this).parent();t.fadeOut(500,function(){t.remove()})}),e(".slider").slick({dots:!0}),e("#map").length>0&&initialiseGoogleMap(certy_vars_from_WP.mapStyles);var i=e(".tabs-menu>li.active");if(i.length>0)for(var t=0;t<i.length;t++){var s=e(i[t]).children().attr("href");e(s).addClass("active").show()}e(".tabs-menu a").on("click",function(t){var o=e(this),r=o.attr("href"),i=o.closest(".tabs"),s=i.find(".tab-content");o.parent().addClass("active"),o.parent().siblings().removeClass("active"),s.not(r).removeClass("active").hide(),e(r).addClass("active").fadeIn(500),t.preventDefault()});var a=e(".togglebox>li.active");a.length>0&&a.find(".togglebox-content").show(),e(".togglebox-header").on("click",function(){var t=e(this);t.next(".togglebox-content").slideToggle(300),t.parent().toggleClass("active")});var n=e(".accordion>li.active");n.length>0&&n.find(".accordion-content").show(),e(".accordion-header").on("click",function(){var t=e(this),o=t.parent(),r=t.next(),i=t.closest(".accordion").find(".accordion-content");o.hasClass("active")?(o.removeClass("active"),r.slideUp()):(o.siblings().removeClass("active"),o.addClass("active"),i.slideUp(300),r.slideDown(300))}),e(".comment-replys-link").on("click",function(){return e(this).closest(".comment").toggleClass("show-replies"),!1});var c={};c.wrapper=null,c.content=null,c.slider=null,c.open=function(t){this.wrapper=e('<div id="pf-popup-wrap" class="pf-popup-wrap"><div class="pf-popup-inner"><div class="pf-popup-middle"><div class="pf-popup-container"><button id="pf-popup-close"><i class="rsicon rsicon-close"></i></button><div id="pf-popup-content" class="pf-popup-content"></div></div></div></div>'),ace.body.append(this.wrapper),this.content=e("#pf-popup-content"),this.content.append(t.clone()),c.wrapper.addClass("opened"),ace_lock_scroll()},c.close=function(){this.wrapper.removeClass("opened"),setTimeout(function(){c.wrapper.remove(),ace_unlock_scroll()},500)},e(document).on("click",".pf-btn-view",function(){var t=e(this).attr("href");return c.open(e(t)),ace.html.addClass("crt-portfolio-opened"),!1}),e(document).on("touchstart click",".crt-portfolio-opened #pf-popup-wrap",function(t){var o=e("#pf-popup-content");o.is(t.target)||0!==o.has(t.target).length||(c.close(),ace.html.removeClass("crt-portfolio-opened"))}),e(".toggle-link").on("click",function(){var t=e(this).attr("href");return e(this).hasClass("opened")?(e(t).slideUp(500),e(this).removeClass("opened")):(e(t).slideDown(500),e(this).addClass("opened")),!1}),e(".share-btn").on("mouseenter",function(){e(this).parent().addClass("hovered")}),e(".share-box").on("mouseleave",function(){var t=e(this);t.hasClass("hovered")&&(t.addClass("closing"),setTimeout(function(){t.removeClass("hovered"),t.removeClass("closing")},300))})})}(jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIl9mdW5jdGlvbnMuanMiLCJvcHRpb25zLmpzIiwib25lLXBhZ2UtbmF2LmpzIiwiX25hdi5qcyIsIl9zaWRlLWJveC5qcyIsIl9zbGlkZXIuanMiLCJfcG9ydGZvbGlvLmpzIiwibWFpbi5qcyIsInRoZW1lLmpzIl0sIm5hbWVzIjpbImFjZV9kZXRlY3RfZGV2aWNlX3R5cGUiLCJ0ZXN0IiwibmF2aWdhdG9yIiwidXNlckFnZW50IiwiYWNlIiwibW9iaWxlIiwiaHRtbCIsImFkZENsYXNzIiwiYWNlX2FwcGVuZF9vdmVybGF5IiwiYm9keSIsImFwcGVuZCIsIm92ZXJsYXkiLCJvYmoiLCJzdHlsZSIsIm9wYWNpdHkiLCJ3aW5kb3ciLCJnZXRDb21wdXRlZFN0eWxlIiwiYWNlX3JlbW92ZV9vdmVybGF5IiwicmVtb3ZlIiwiYWNlX2xvY2tfc2Nyb2xsIiwiaW5pdFdpZHRoIiwib3V0ZXJXaWR0aCIsImluaXRIZWlnaHQiLCJvdXRlckhlaWdodCIsInNjcm9sbFBvc2l0aW9uIiwic2VsZiIsInBhZ2VYT2Zmc2V0IiwiZG9jdW1lbnQiLCJkb2N1bWVudEVsZW1lbnQiLCJzY3JvbGxMZWZ0IiwicGFnZVlPZmZzZXQiLCJzY3JvbGxUb3AiLCJkYXRhIiwiY3NzIiwic2Nyb2xsVG8iLCJtYXJnaW5SIiwibWFyZ2luQiIsIm1hcmdpbi1yaWdodCIsIm1hcmdpbi1ib3R0b20iLCJhY2VfdW5sb2NrX3Njcm9sbCIsInJlbW92ZUNsYXNzIiwiYWNlX29wZW5fc2lkZWJhciIsImFjZV9jbG9zZV9zaWRlYmFyIiwiYWNlX3Byb2dyZXNzX2NoYXJ0IiwiZWxlbWVudCIsInRleHQiLCJ2YWx1ZSIsImR1cmF0aW9uIiwiUHJvZ3Jlc3NCYXIiLCJDaXJjbGUiLCJjb2xvciIsImNlcnR5IiwidmFycyIsInRoZW1lQ29sb3IiLCJzdHJva2VXaWR0aCIsInRyYWlsV2lkdGgiLCJjbGFzc05hbWUiLCJ0b3AiLCJsZWZ0IiwicHJvZ3Jlc3MiLCJ0ZXh0Q29sb3IiLCJwb3NpdGlvbiIsIm1hcmdpbiIsInBhZGRpbmciLCJ0cmFuc2Zvcm0iLCJwcmVmaXgiLCJhdXRvU3R5bGVDb250YWluZXIiLCJhbGlnblRvQm90dG9tIiwic3ZnU3R5bGUiLCJkaXNwbGF5Iiwid2lkdGgiLCJlYXNpbmciLCJhbmltYXRlIiwiYWNlX3Byb2dyZXNzX2xpbmUiLCJMaW5lIiwidHJhaWxDb2xvciIsImhlaWdodCIsInJpZ2h0IiwiYWNlX2lzX2VsZW1faW5fdmlld3BvcnQiLCJlbCIsInZwYXJ0IiwicmVjdCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsImJvdHRvbSIsImlubmVySGVpZ2h0IiwiY2xpZW50SGVpZ2h0IiwiaW5uZXJXaWR0aCIsImNsaWVudFdpZHRoIiwiYWNlX2lzX2VsZW1zX2luX3ZpZXdwb3J0IiwiZWxlbXMiLCJpIiwibGVuZ3RoIiwiaXRlbSIsImpRdWVyeSIsImhhc0NsYXNzIiwiY2hhcnQiLCJmaW5kIiwibGluZSIsImFjZV9hcHBlYXJfZWxlbXMiLCJzY3JvbGwiLCJyZXNpemUiLCJpbml0aWFsaXNlR29vZ2xlTWFwIiwibWFwU3R5bGVzIiwibGF0bG5nIiwibGF0IiwibG5nIiwibWFwIiwibWFwQ2FudmFzIiwiZ2V0IiwibWFwX3N0eWxlcyIsInBhcnNlSlNPTiIsImdvb2dsZSIsIm1hcHMiLCJMYXRMbmciLCJtYXBPcHRpb25zIiwiem9vbSIsImNlbnRlciIsInNjcm9sbHdoZWVsIiwibWFwVHlwZUlkIiwiTWFwVHlwZUlkIiwiUk9BRE1BUCIsInN0eWxlcyIsIk1hcCIsIk1hcmtlciIsImljb24iLCJwYXRoIiwiZmlsbENvbG9yIiwiY2VydHlfdmFyc19mcm9tX1dQIiwiZmlsbE9wYWNpdHkiLCJzY2FsZSIsInN0cm9rZUNvbG9yIiwic3Ryb2tlV2VpZ2h0IiwiYW5jaG9yIiwiUG9pbnQiLCJ0aXRsZSIsImV2ZW50IiwiYWRkRG9tTGlzdGVuZXIiLCJzZXRDZW50ZXIiLCJuYXZTdGlreSIsImVuYWJsZV9zdGlja3kiLCJydGwiLCJzY3JlZW5NZCIsIm5hdiIsImFycm93Iiwic3RpY2t5IiwiYWN0aXZlIiwidG9vbHRpcCIsInNpZGVCb3giLCJhbmltYXRpb24iLCIkIiwidW5kZWZpbmVkIiwiT25lUGFnZU5hdiIsImVsZW0iLCJvcHRpb25zIiwidGhpcyIsIiRlbGVtIiwibWV0YWRhdGEiLCIkd2luIiwic2VjdGlvbnMiLCJkaWRTY3JvbGwiLCIkZG9jIiwiZG9jSGVpZ2h0IiwicHJvdG90eXBlIiwiZGVmYXVsdHMiLCJuYXZJdGVtcyIsImN1cnJlbnRDbGFzcyIsImNoYW5nZUhhc2giLCJmaWx0ZXIiLCJzY3JvbGxTcGVlZCIsInNjcm9sbFRocmVzaG9sZCIsImJlZ2luIiwiZW5kIiwic2Nyb2xsQ2hhbmdlIiwiaW5pdCIsImNvbmZpZyIsImV4dGVuZCIsIiRuYXYiLCJvbiIsInByb3h5IiwiaGFuZGxlQ2xpY2siLCJnZXRQb3NpdGlvbnMiLCJiaW5kSW50ZXJ2YWwiLCJhZGp1c3ROYXYiLCIkcGFyZW50IiwidCIsInNldEludGVydmFsIiwiZ2V0SGFzaCIsIiRsaW5rIiwiYXR0ciIsInNwbGl0IiwibGlua0hyZWYiLCJ0b3BQb3MiLCIkdGFyZ2V0IiwiZWFjaCIsIm9mZnNldCIsIk1hdGgiLCJyb3VuZCIsImdldFNlY3Rpb24iLCJ3aW5kb3dQb3MiLCJyZXR1cm5WYWx1ZSIsIndpbmRvd0hlaWdodCIsInNlY3Rpb24iLCJlIiwiY3VycmVudFRhcmdldCIsInBhcmVudCIsIm5ld0xvYyIsInVuYmluZEludGVydmFsIiwibG9jYXRpb24iLCJoYXNoIiwicHJldmVudERlZmF1bHQiLCJ3aW5kb3dUb3AiLCJ0YXJnZXQiLCJjYWxsYmFjayIsImNsb3Nlc3QiLCJjbGVhckludGVydmFsIiwidW5iaW5kIiwiZm4iLCJvbmVQYWdlTmF2IiwiaW5pdEdsb2JhbFZhcnMiLCJmb290ZXIiLCJ3aW5kb3dXIiwid2luZG93SCIsIndpbmRvd1Njcm9sbFRvcCIsImxvY2tTY3JvbGwiLCJ1bmxvY2tTY3JvbGwiLCJpbml0U2Nyb2xsIiwibUN1c3RvbVNjcm9sbGJhciIsImF4aXMiLCJzY3JvbGxiYXJQb3NpdGlvbiIsImV4aXN0cyIsIm1ha2VTdGlja3kiLCJNb2Rlcm5penIiLCJtcSIsIndyYXAiLCJ0aW1lciIsInNob3ciLCJjdXJyZW50Iiwic2V0VGltZW91dCIsImZhZGVJbiIsImhpZGUiLCJjbGVhclRpbWVvdXQiLCJmYWRlT3V0Iiwic2xpZGVyIiwic2xpY2siLCJjYXJvdXNlbCIsImRvdHMiLCJwb3J0Zm9saW8iLCJwb3B1cFNsaWRlciIsInBvcHVwQ2Fyb3VzZWwiLCJjdXJyZW50RW1iZWQiLCJjdXJyZW50RW1iZWRUeXBlIiwiaW5pdEdyaWQiLCJncmlkIiwiaXNvdG9wZSIsImlzT3JpZ2luTGVmdCIsIml0ZW1TZWxlY3RvciIsInBlcmNlbnRQb3NpdGlvbiIsIm1hc29ucnkiLCJjb2x1bW5XaWR0aCIsImltYWdlc0xvYWRlZCIsImZpbHRlcl9idG4iLCJmaWx0ZXJWYWx1ZSIsIm9wZW5Qb3B1cCIsInBvcHVwX3dyYXBwZXIiLCJwb3B1cF9jb250ZW50IiwiY2xvbmUiLCJsb2FkRW1iZWQiLCJ0cmlnZ2VyIiwiY3VycmVudFNsaWRlIiwibmV4dFNsaWRlIiwiaWZyYW1lIiwicGF1c2UiLCJzcGVlZCIsImluZmluaXRlIiwic2xpZGVzVG9TaG93IiwiYWRhcHRpdmVIZWlnaHQiLCJzbGlkZXNUb1Njcm9sbCIsImxhenlMb2FkIiwiY2xvc2VQb3B1cCIsInNsaWRlSW5kZXgiLCJ0cmltIiwiY3VyZW50RW1iZWRVcmwiLCJlbWJlZFciLCJlbWJlZEgiLCJwYWRkaW5nLXRvcCIsImltZyIsInNyYyIsImxvYWQiLCJlcnJvciIsImVtcHR5IiwiYWxsb3dmdWxsc2NyZWVuIiwidmlkZW9PcHRpb25zIiwicGFyc2VPcHRpb25zIiwidmlkZW8iLCJwb3N0ZXIiLCJtcDQiLCJ3ZWJtIiwib2d2Iiwic3RyIiwiZGVsaW1pdGVySW5kZXgiLCJvcHRpb24iLCJwcm9wIiwidmFsIiwiYXJyIiwibGVuIiwicmVwbGFjZSIsInNlYXJjaCIsImluZGV4T2YiLCJzdWJzdHJpbmciLCJpc05hTiIsImhvdmVyIiwicGZfZ3JpZCIsImlkIiwiaHJlZiIsImNvbnRhaW5lciIsImlzIiwiaGFzIiwiJGJ0blNjcm9sbFRvcCIsInNpZGViYXIiLCJidG4iLCJsaW5lcyIsImNoYXJ0cyIsImJ1bGxldHMiLCJuZXh0Iiwic2xpZGVEb3duIiwidGhlbWUiLCJhdXRvSGlkZVNjcm9sbGJhciIsInNjcm9sbEJ1dHRvbnMiLCJlbmFibGUiLCJibG9jayIsImhsanMiLCJoaWdobGlnaHRCbG9jayIsImFsZXJ0IiwidGFiQWN0aXZlIiwidGFiX2lkIiwiY2hpbGRyZW4iLCJ0YWIiLCJ0YWJfd3JhcCIsInRhYl9jb250ZW50Iiwic2libGluZ3MiLCJub3QiLCJ0b2dnbGVib3hBY3RpdmUiLCJ0b2dnbGVfaGVhZCIsInNsaWRlVG9nZ2xlIiwidG9nZ2xlQ2xhc3MiLCJhY2NvcmRlb25BY3RpdmUiLCJhY2NfaGVhZCIsImFjY19zZWN0aW9uIiwiYWNjX2NvbnRlbnQiLCJhY2NfYWxsX2NvbnRlbnRzIiwic2xpZGVVcCIsInBmX3BvcHVwIiwid3JhcHBlciIsImNvbnRlbnQiLCJvcGVuIiwiY2xvc2UiLCJzaGFyZV9ib3giXSwibWFwcGluZ3MiOiJBQWtFQSxRQUFBQSwwQkFDQSxpRUFBQUMsS0FBQUMsVUFBQUMsWUFDQUMsSUFBQUMsUUFBQSxFQUNBRCxJQUFBRSxLQUFBQyxTQUFBLGdCQUVBSCxJQUFBQyxRQUFBLEVBQ0FELElBQUFFLEtBQUFDLFNBQUEsZ0JBS0EsUUFBQUMsc0JBQ0FKLElBQUFLLEtBQUFDLE9BQUFOLElBQUFPLFFBQUFDLEtBR0FSLElBQUFPLFFBQUFDLElBQUEsR0FBQUMsTUFBQUMsUUFBQSxFQUdBQyxPQUFBQyxpQkFBQVosSUFBQU8sUUFBQUMsSUFBQSxJQUFBRSxRQUdBVixJQUFBTyxRQUFBQyxJQUFBLEdBQUFDLE1BQUFDLFFBQUEsRUFHQSxRQUFBRyxzQkFFQWIsSUFBQU8sUUFBQUMsSUFBQSxHQUFBQyxNQUFBQyxRQUFBLEVBR0FWLElBQUFPLFFBQUFDLElBQUFNLFNBSUEsUUFBQUMsbUJBQ0Es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VCxZQUFBLFdBQ0E0VCxFQUFBNVQsWUFBQSxZQUNBLFdBS0FxRCIsImZpbGUiOiJ0aGVtZS5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ2VydHkgRnVuY3Rpb25zXHJcbiAqL1xyXG5cclxuLyogSW5pdCBHbG9iYWwgVmFyaWFibGVzICovXHJcbmNlcnR5LmluaXRHbG9iYWxWYXJzID0gZnVuY3Rpb24oKXtcclxuICAgIC8vIGdldCBkb2N1bWVudCA8aHRtbD5cclxuICAgIHRoaXMudmFycy5odG1sID0galF1ZXJ5KCdodG1sJyk7XHJcblxyXG4gICAgLy8gZ2V0IGRvY3VtZW50IDxib2R5PlxyXG4gICAgdGhpcy52YXJzLmJvZHkgPSBqUXVlcnkoJ2JvZHknKTtcclxuXHJcbiAgICAvLyBnZXQgZG9jdW1lbnQgI2Zvb3RlclxyXG4gICAgdGhpcy52YXJzLmZvb3RlciA9IGpRdWVyeSgnI2NydC1mb290ZXInKTtcclxuXHJcbiAgICAvLyBnZXQgd2luZG93IFdpZHRoXHJcbiAgICB0aGlzLnZhcnMud2luZG93VyA9IGpRdWVyeSh3aW5kb3cpLndpZHRoKCk7XHJcblxyXG4gICAgLy8gZ2V0IHdpbmRvdyBoZWlnaHRcclxuICAgIHRoaXMudmFycy53aW5kb3dIID0galF1ZXJ5KHdpbmRvdykuaGVpZ2h0KCk7XHJcblxyXG4gICAgLy8gZ2V0IHdpbmRvdyBzY3JvbGwgdG9wXHJcbiAgICB0aGlzLnZhcnMud2luZG93U2Nyb2xsVG9wID0galF1ZXJ5KHdpbmRvdykuc2Nyb2xsVG9wKCk7XHJcblxyXG4gICAgLy8gZGV0ZWN0IGRldmljZSB0eXBlXHJcbiAgICBpZiAoL0FuZHJvaWR8d2ViT1N8aVBob25lfGlQYWR8aVBvZHxCbGFja0JlcnJ5fElFTW9iaWxlfE9wZXJhIE1pbmkvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpKSB7XHJcbiAgICAgICAgdGhpcy52YXJzLm1vYmlsZSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy52YXJzLmh0bWwuYWRkQ2xhc3MoJ21vYmlsZScpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLnZhcnMubW9iaWxlID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy52YXJzLmh0bWwuYWRkQ2xhc3MoJ2Rlc2t0b3AnKTtcclxuICAgIH1cclxufTtcclxuXHJcbi8qIExvY2sgV2luZG93IFNjcm9sbCAqL1xyXG5jZXJ0eS5sb2NrU2Nyb2xsID0gZnVuY3Rpb24oKXtcclxuICAgIHZhciBpbml0V2lkdGggPSBjZXJ0eS52YXJzLmh0bWwub3V0ZXJXaWR0aCgpO1xyXG4gICAgdmFyIGluaXRIZWlnaHQgPSBjZXJ0eS52YXJzLmJvZHkub3V0ZXJIZWlnaHQoKTtcclxuXHJcbiAgICB2YXIgc2Nyb2xsUG9zaXRpb24gPSBbXHJcbiAgICAgICAgc2VsZi5wYWdlWE9mZnNldCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsTGVmdCB8fCBkb2N1bWVudC5ib2R5LnNjcm9sbExlZnQsXHJcbiAgICAgICAgc2VsZi5wYWdlWU9mZnNldCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wIHx8IGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wXHJcbiAgICBdO1xyXG5cclxuICAgIGNlcnR5LnZhcnMuaHRtbC5kYXRhKCdzY3JvbGwtcG9zaXRpb24nLCBzY3JvbGxQb3NpdGlvbik7XHJcbiAgICBjZXJ0eS52YXJzLmh0bWwuZGF0YSgncHJldmlvdXMtb3ZlcmZsb3cnLCBjZXJ0eS52YXJzLmh0bWwuY3NzKCdvdmVyZmxvdycpKTtcclxuICAgIGNlcnR5LnZhcnMuaHRtbC5jc3MoJ292ZXJmbG93JywgJ2hpZGRlbicpO1xyXG4gICAgd2luZG93LnNjcm9sbFRvKHNjcm9sbFBvc2l0aW9uWzBdLCBzY3JvbGxQb3NpdGlvblsxXSk7XHJcblxyXG4gICAgdmFyIG1hcmdpblIgPSBjZXJ0eS52YXJzLmJvZHkub3V0ZXJXaWR0aCgpIC0gaW5pdFdpZHRoO1xyXG4gICAgdmFyIG1hcmdpbkIgPSBjZXJ0eS52YXJzLmJvZHkub3V0ZXJIZWlnaHQoKSAtIGluaXRIZWlnaHQ7XHJcbiAgICBjZXJ0eS52YXJzLmJvZHkuY3NzKHsnbWFyZ2luLXJpZ2h0JzogbWFyZ2luUiwgJ21hcmdpbi1ib3R0b20nOiBtYXJnaW5CfSk7XHJcbiAgICBjZXJ0eS52YXJzLmh0bWwuYWRkQ2xhc3MoJ2xvY2stc2Nyb2xsJyk7XHJcbn07XHJcblxyXG4vKiBVbmxvY2sgV2luZG93IFNjcm9sbCAqL1xyXG5jZXJ0eS51bmxvY2tTY3JvbGwgPSBmdW5jdGlvbigpe1xyXG4gICAgY2VydHkudmFycy5odG1sLmNzcygnb3ZlcmZsb3cnLCBjZXJ0eS52YXJzLmh0bWwuZGF0YSgncHJldmlvdXMtb3ZlcmZsb3cnKSk7XHJcbiAgICB2YXIgc2Nyb2xsUG9zaXRpb24gPSBjZXJ0eS52YXJzLmh0bWwuZGF0YSgnc2Nyb2xsLXBvc2l0aW9uJyk7XHJcbiAgICB3aW5kb3cuc2Nyb2xsVG8oc2Nyb2xsUG9zaXRpb25bMF0sIHNjcm9sbFBvc2l0aW9uWzFdKTtcclxuXHJcbiAgICBjZXJ0eS52YXJzLmJvZHkuY3NzKHsnbWFyZ2luLXJpZ2h0JzogMCwgJ21hcmdpbi1ib3R0b20nOiAwfSk7XHJcbiAgICBjZXJ0eS52YXJzLmh0bWwucmVtb3ZlQ2xhc3MoJ2xvY2stc2Nyb2xsJyk7XHJcbn07XHJcblxyXG4vKiBEZXRlY3QgRGV2aWNlIFR5cGUgKi9cclxuZnVuY3Rpb24gYWNlX2RldGVjdF9kZXZpY2VfdHlwZSgpIHtcclxuICAgIGlmICgvQW5kcm9pZHx3ZWJPU3xpUGhvbmV8aVBhZHxpUG9kfEJsYWNrQmVycnl8SUVNb2JpbGV8T3BlcmEgTWluaS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkpIHtcclxuICAgICAgICBhY2UubW9iaWxlID0gdHJ1ZTtcclxuICAgICAgICBhY2UuaHRtbC5hZGRDbGFzcygnY3J0LW1vYmlsZScpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBhY2UubW9iaWxlID0gZmFsc2U7XHJcbiAgICAgICAgYWNlLmh0bWwuYWRkQ2xhc3MoJ2NydC1kZXNrdG9wJyk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qIENlcnR5IE92ZXJsYXkgKi9cclxuZnVuY3Rpb24gYWNlX2FwcGVuZF9vdmVybGF5KCkge1xyXG4gICAgYWNlLmJvZHkuYXBwZW5kKGFjZS5vdmVybGF5Lm9iaik7XHJcblxyXG4gICAgLy8gTWFrZSB0aGUgZWxlbWVudCBmdWxseSB0cmFuc3BhcmVudFxyXG4gICAgYWNlLm92ZXJsYXkub2JqWzBdLnN0eWxlLm9wYWNpdHkgPSAwO1xyXG5cclxuICAgIC8vIE1ha2Ugc3VyZSB0aGUgaW5pdGlhbCBzdGF0ZSBpcyBhcHBsaWVkXHJcbiAgICB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShhY2Uub3ZlcmxheS5vYmpbMF0pLm9wYWNpdHk7XHJcblxyXG4gICAgLy8gRmFkZSBpdCBpblxyXG4gICAgYWNlLm92ZXJsYXkub2JqWzBdLnN0eWxlLm9wYWNpdHkgPSAxO1xyXG59XHJcblxyXG5mdW5jdGlvbiBhY2VfcmVtb3ZlX292ZXJsYXkoKSB7XHJcbiAgICAvLyBGYWRlIGl0IG91dFxyXG4gICAgYWNlLm92ZXJsYXkub2JqWzBdLnN0eWxlLm9wYWNpdHkgPSAwO1xyXG5cclxuICAgIC8vIFJlbW92ZSBvdmVybGF5XHJcbiAgICBhY2Uub3ZlcmxheS5vYmoucmVtb3ZlKCk7XHJcbn1cclxuXHJcbi8qIENlcnR5IExvY2sgU2Nyb2xsICovXHJcbmZ1bmN0aW9uIGFjZV9sb2NrX3Njcm9sbCgpIHtcclxuICAgIHZhciBpbml0V2lkdGggPSBhY2UuaHRtbC5vdXRlcldpZHRoKCk7XHJcbiAgICB2YXIgaW5pdEhlaWdodCA9IGFjZS5ib2R5Lm91dGVySGVpZ2h0KCk7XHJcblxyXG4gICAgdmFyIHNjcm9sbFBvc2l0aW9uID0gW1xyXG4gICAgICAgIHNlbGYucGFnZVhPZmZzZXQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnQgfHwgZG9jdW1lbnQuYm9keS5zY3JvbGxMZWZ0LFxyXG4gICAgICAgIHNlbGYucGFnZVlPZmZzZXQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCB8fCBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcFxyXG4gICAgXTtcclxuXHJcbiAgICBhY2UuaHRtbC5kYXRhKCdzY3JvbGwtcG9zaXRpb24nLCBzY3JvbGxQb3NpdGlvbik7XHJcbiAgICBhY2UuaHRtbC5kYXRhKCdwcmV2aW91cy1vdmVyZmxvdycsIGFjZS5odG1sLmNzcygnb3ZlcmZsb3cnKSk7XHJcbiAgICBhY2UuaHRtbC5jc3MoJ292ZXJmbG93JywgJ2hpZGRlbicpO1xyXG4gICAgd2luZG93LnNjcm9sbFRvKHNjcm9sbFBvc2l0aW9uWzBdLCBzY3JvbGxQb3NpdGlvblsxXSk7XHJcblxyXG4gICAgdmFyIG1hcmdpblIgPSBhY2UuYm9keS5vdXRlcldpZHRoKCkgLSBpbml0V2lkdGg7XHJcbiAgICB2YXIgbWFyZ2luQiA9IGFjZS5ib2R5Lm91dGVySGVpZ2h0KCkgLSBpbml0SGVpZ2h0O1xyXG4gICAgYWNlLmJvZHkuY3NzKHsnbWFyZ2luLXJpZ2h0JzogbWFyZ2luUiwgJ21hcmdpbi1ib3R0b20nOiBtYXJnaW5CfSk7XHJcbiAgICBhY2UuaHRtbC5hZGRDbGFzcygnY3J0LWxvY2stc2Nyb2xsJyk7XHJcbn1cclxuXHJcbi8qIENlcnR5IFVubG9jayBTY3JvbGwgKi9cclxuZnVuY3Rpb24gYWNlX3VubG9ja19zY3JvbGwoKSB7XHJcbiAgICBhY2UuaHRtbC5jc3MoJ292ZXJmbG93JywgYWNlLmh0bWwuZGF0YSgncHJldmlvdXMtb3ZlcmZsb3cnKSk7XHJcbiAgICB2YXIgc2Nyb2xsUG9zaXRpb24gPSBhY2UuaHRtbC5kYXRhKCdzY3JvbGwtcG9zaXRpb24nKTtcclxuICAgIHdpbmRvdy5zY3JvbGxUbyhzY3JvbGxQb3NpdGlvblswXSwgc2Nyb2xsUG9zaXRpb25bMV0pO1xyXG5cclxuICAgIGFjZS5ib2R5LmNzcyh7J21hcmdpbi1yaWdodCc6IDAsICdtYXJnaW4tYm90dG9tJzogMH0pO1xyXG4gICAgYWNlLmh0bWwucmVtb3ZlQ2xhc3MoJ2NydC1sb2NrLXNjcm9sbCcpO1xyXG59XHJcblxyXG4vKiBDZXJ0eSBDbG9zZSBTaWRlYmFyICovXHJcbmZ1bmN0aW9uIGFjZV9vcGVuX3NpZGViYXIoKSB7XHJcbiAgICBhY2UuaHRtbC5hZGRDbGFzcygnY3J0LXNpZGViYXItb3BlbmVkJyk7XHJcbiAgICBhY2VfYXBwZW5kX292ZXJsYXkoKTtcclxuICAgIGFjZV9sb2NrX3Njcm9sbCgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBhY2VfY2xvc2Vfc2lkZWJhcigpIHtcclxuICAgIGFjZS5odG1sLnJlbW92ZUNsYXNzKCdjcnQtc2lkZWJhci1vcGVuZWQnKTtcclxuICAgIGFjZV9yZW1vdmVfb3ZlcmxheSgpO1xyXG4gICAgYWNlX3VubG9ja19zY3JvbGwoKTtcclxufVxyXG5cclxuLyogQ2VydHkgUHJvZ3Jlc3MgQ2lyY2xlICovXHJcbmZ1bmN0aW9uIGFjZV9wcm9ncmVzc19jaGFydChlbGVtZW50LCB0ZXh0LCB2YWx1ZSwgZHVyYXRpb24pIHtcclxuICAgIC8vIFdlIGhhdmUgdW5kZWZpbmVkIHRleHQgd2hlbiB1c2VyIGRpZG50biBmaWxsIHRleHQgZmllbGQgZnJvbSBhZG1pblxyXG4gICAgaWYgKHR5cGVvZiB0ZXh0ID09PSBcInVuZGVmaW5lZFwiKSB7IHRleHQgPSBcIlwiOyB9XHJcblxyXG4gICAgdmFyIGNpcmNsZSA9IG5ldyBQcm9ncmVzc0Jhci5DaXJjbGUoZWxlbWVudCwge1xyXG4gICAgICAgIGNvbG9yOiBjZXJ0eS52YXJzLnRoZW1lQ29sb3IsXHJcbiAgICAgICAgc3Ryb2tlV2lkdGg6IDUsXHJcbiAgICAgICAgdHJhaWxXaWR0aDogMCxcclxuICAgICAgICB0ZXh0OiB7XHJcbiAgICAgICAgICAgIHZhbHVlOiB0ZXh0LFxyXG4gICAgICAgICAgICBjbGFzc05hbWU6ICdwcm9ncmVzcy10ZXh0JyxcclxuICAgICAgICAgICAgc3R5bGU6IHtcclxuICAgICAgICAgICAgICAgIHRvcDogJzUwJScsXHJcbiAgICAgICAgICAgICAgICBsZWZ0OiAnNTAlJyxcclxuICAgICAgICAgICAgICAgIGNvbG9yOiBjZXJ0eS5wcm9ncmVzcy50ZXh0Q29sb3IsXHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcclxuICAgICAgICAgICAgICAgIG1hcmdpbjogMCxcclxuICAgICAgICAgICAgICAgIHBhZGRpbmc6IDAsXHJcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IHtcclxuICAgICAgICAgICAgICAgICAgICBwcmVmaXg6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICd0cmFuc2xhdGUoLTUwJSwgLTUwJSknXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGF1dG9TdHlsZUNvbnRhaW5lcjogdHJ1ZSxcclxuICAgICAgICAgICAgYWxpZ25Ub0JvdHRvbTogdHJ1ZVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc3ZnU3R5bGU6IHtcclxuICAgICAgICAgICAgZGlzcGxheTogJ2Jsb2NrJyxcclxuICAgICAgICAgICAgd2lkdGg6ICcxMDAlJ1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZHVyYXRpb246IGR1cmF0aW9uLFxyXG4gICAgICAgIGVhc2luZzogJ2Vhc2VPdXQnXHJcbiAgICB9KTtcclxuXHJcbiAgICBjaXJjbGUuYW5pbWF0ZSh2YWx1ZSk7IC8vIE51bWJlciBmcm9tIDAuMCB0byAxLjBcclxufVxyXG5cclxuLyogQ2VydHkgUHJvZ3Jlc3MgTGluZSAqL1xyXG5mdW5jdGlvbiBhY2VfcHJvZ3Jlc3NfbGluZShlbGVtZW50LCB0ZXh0LCB2YWx1ZSwgZHVyYXRpb24pIHtcclxuICAgIC8vIFdlIGhhdmUgdW5kZWZpbmVkIHRleHQgd2hlbiB1c2VyIGRpZG50biBmaWxsIHRleHQgZmllbGQgZnJvbSBhZG1pblxyXG4gICAgaWYgKHR5cGVvZiB0ZXh0ID09PSBcInVuZGVmaW5lZFwiKSB7IHRleHQgPSBcIlwiOyB9XHJcbiAgICBcclxuICAgIHZhciBsaW5lID0gbmV3IFByb2dyZXNzQmFyLkxpbmUoZWxlbWVudCwge1xyXG4gICAgICAgIHN0cm9rZVdpZHRoOiA0LFxyXG4gICAgICAgIGVhc2luZzogJ2Vhc2VJbk91dCcsXHJcbiAgICAgICAgZHVyYXRpb246IGR1cmF0aW9uLFxyXG4gICAgICAgIGNvbG9yOiBjZXJ0eS52YXJzLnRoZW1lQ29sb3IsXHJcbiAgICAgICAgdHJhaWxDb2xvcjogY2VydHkucHJvZ3Jlc3MudHJhaWxDb2xvcixcclxuICAgICAgICB0cmFpbFdpZHRoOiA0LFxyXG4gICAgICAgIHN2Z1N0eWxlOiB7XHJcbiAgICAgICAgICAgIHdpZHRoOiAnMTAwJScsXHJcbiAgICAgICAgICAgIGhlaWdodDogJzEwMCUnXHJcbiAgICAgICAgfSxcclxuICAgICAgICB0ZXh0OiB7XHJcbiAgICAgICAgICAgIHZhbHVlOiB0ZXh0LFxyXG4gICAgICAgICAgICBjbGFzc05hbWU6ICdwcm9ncmVzcy10ZXh0JyxcclxuICAgICAgICAgICAgc3R5bGU6IHtcclxuICAgICAgICAgICAgICAgIHRvcDogJy0yNXB4JyxcclxuICAgICAgICAgICAgICAgIHJpZ2h0OiAnMCcsXHJcbiAgICAgICAgICAgICAgICBjb2xvcjogY2VydHkucHJvZ3Jlc3MudGV4dENvbG9yLFxyXG4gICAgICAgICAgICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXHJcbiAgICAgICAgICAgICAgICBtYXJnaW46IDAsXHJcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiAwLFxyXG4gICAgICAgICAgICAgICAgdHJhbnNmb3JtOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJlZml4OiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiAndHJhbnNsYXRlKDAsIDApJ1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBhdXRvU3R5bGVDb250YWluZXI6IHRydWVcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBsaW5lLmFuaW1hdGUodmFsdWUpOyAgLy8gTnVtYmVyIGZyb20gMC4wIHRvIDEuMFxyXG59XHJcblxyXG4vKiBDZXJ0eSBFbGVtZW50IEluIFZpZXdwb3J0ICovXHJcbmZ1bmN0aW9uIGFjZV9pc19lbGVtX2luX3ZpZXdwb3J0KGVsLCB2cGFydCkge1xyXG4gICAgdmFyIHJlY3QgPSBlbFswXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuXHJcbiAgICByZXR1cm4gKFxyXG4gICAgcmVjdC5ib3R0b20gPj0gMCAmJlxyXG4gICAgcmVjdC5yaWdodCA+PSAwICYmXHJcbiAgICByZWN0LnRvcCArIHZwYXJ0IDw9ICh3aW5kb3cuaW5uZXJIZWlnaHQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCkgJiZcclxuICAgIHJlY3QubGVmdCA8PSAod2luZG93LmlubmVyV2lkdGggfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoKVxyXG4gICAgKTtcclxufVxyXG5cclxuZnVuY3Rpb24gYWNlX2lzX2VsZW1zX2luX3ZpZXdwb3J0KGVsZW1zLCB2cGFydCkge1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbGVtcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIHZhciBpdGVtID0galF1ZXJ5KGVsZW1zW2ldKTtcclxuXHJcbiAgICAgICAgaWYgKGl0ZW0uaGFzQ2xhc3MoJ2NydC1hbmltYXRlJykgJiYgYWNlX2lzX2VsZW1faW5fdmlld3BvcnQoaXRlbSwgdnBhcnQpKSB7XHJcbiAgICAgICAgICAgIGl0ZW0ucmVtb3ZlQ2xhc3MoJ2NydC1hbmltYXRlJykuYWRkQ2xhc3MoJ2NydC1hbmltYXRlZCcpO1xyXG5cclxuICAgICAgICAgICAgLy8gQW5pbWF0ZSBDaXJjbGUgQ2hhcnRcclxuICAgICAgICAgICAgaWYoaXRlbS5oYXNDbGFzcygncHJvZ3Jlc3MtY2hhcnQnKSl7XHJcbiAgICAgICAgICAgICAgICB2YXIgY2hhcnQgPSBpdGVtLmZpbmQoJy5wcm9ncmVzcy1iYXInKTtcclxuICAgICAgICAgICAgICAgIGFjZV9wcm9ncmVzc19jaGFydChjaGFydFswXSwgY2hhcnQuZGF0YSgndGV4dCcpLCBjaGFydC5kYXRhKCd2YWx1ZScpLCAxMDAwKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gQW5pbWF0ZSBMaW5lIENoYXJ0XHJcbiAgICAgICAgICAgIGlmKGl0ZW0uaGFzQ2xhc3MoJ3Byb2dyZXNzLWxpbmUnKSl7XHJcbiAgICAgICAgICAgICAgICB2YXIgbGluZSA9IGl0ZW0uZmluZCgnLnByb2dyZXNzLWJhcicpO1xyXG4gICAgICAgICAgICAgICAgYWNlX3Byb2dyZXNzX2xpbmUobGluZVswXSwgbGluZS5kYXRhKCd0ZXh0JyksIGxpbmUuZGF0YSgndmFsdWUnKSwgMTAwMCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFjZV9hcHBlYXJfZWxlbXMoZWxlbXMsIHZwYXJ0KSB7XHJcbiAgICBhY2VfaXNfZWxlbXNfaW5fdmlld3BvcnQoZWxlbXMsIHZwYXJ0KTtcclxuXHJcbiAgICBqUXVlcnkod2luZG93KS5zY3JvbGwoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGFjZV9pc19lbGVtc19pbl92aWV3cG9ydChlbGVtcywgdnBhcnQpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgalF1ZXJ5KHdpbmRvdykucmVzaXplKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBhY2VfaXNfZWxlbXNfaW5fdmlld3BvcnQoZWxlbXMsIHZwYXJ0KTtcclxuICAgIH0pO1xyXG59XHJcblxyXG4vKiBDZXJ0eSBHb29nbGUgTWFwICovXHJcbmZ1bmN0aW9uIGluaXRpYWxpc2VHb29nbGVNYXAobWFwU3R5bGVzKSB7XHJcbiAgICB2YXIgbGF0bG5nO1xyXG4gICAgdmFyIGxhdCA9IDQ0LjU0MDM7XHJcbiAgICB2YXIgbG5nID0gLTc4LjU0NjM7XHJcbiAgICB2YXIgbWFwID0galF1ZXJ5KCcjbWFwJyk7XHJcbiAgICB2YXIgbWFwQ2FudmFzID0gbWFwLmdldCgwKTtcclxuICAgIHZhciBtYXBfc3R5bGVzID0galF1ZXJ5LnBhcnNlSlNPTihtYXBTdHlsZXMpO1xyXG5cclxuICAgIGlmIChtYXAuZGF0YShcImxhdGl0dWRlXCIpKSBsYXQgPSBtYXAuZGF0YShcImxhdGl0dWRlXCIpO1xyXG4gICAgaWYgKG1hcC5kYXRhKFwibG9uZ2l0dWRlXCIpKSBsbmcgPSBtYXAuZGF0YShcImxvbmdpdHVkZVwiKTtcclxuXHJcbiAgICBsYXRsbmcgPSBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKGxhdCwgbG5nKTtcclxuXHJcbiAgICAvLyBNYXAgT3B0aW9uc1xyXG4gICAgdmFyIG1hcE9wdGlvbnMgPSB7XHJcbiAgICAgICAgem9vbTogMTQsXHJcbiAgICAgICAgY2VudGVyOiBsYXRsbmcsXHJcbiAgICAgICAgc2Nyb2xsd2hlZWw6IHRydWUsXHJcbiAgICAgICAgbWFwVHlwZUlkOiBnb29nbGUubWFwcy5NYXBUeXBlSWQuUk9BRE1BUCxcclxuICAgICAgICBzdHlsZXM6IG1hcF9zdHlsZXNcclxuICAgIH07XHJcblxyXG4gICAgLy8gQ3JlYXRlIHRoZSBNYXBcclxuICAgIG1hcCA9IG5ldyBnb29nbGUubWFwcy5NYXAobWFwQ2FudmFzLCBtYXBPcHRpb25zKTtcclxuXHJcbiAgICB2YXIgbWFya2VyID0gbmV3IGdvb2dsZS5tYXBzLk1hcmtlcih7XHJcbiAgICAgICAgbWFwOiBtYXAsXHJcbiAgICAgICAgcG9zaXRpb246IGxhdGxuZyxcclxuICAgICAgICBpY29uOiB7XHJcbiAgICAgICAgICAgIHBhdGg6ICdNMTI1IDQxMCBjLTU2IC03MiAtMTExIC0xNzYgLTEyMCAtMjI0IC03IC0zNiAxMSAtODMgNDkgLTEyNCA3NiAtODUgMjIzIC02NyAyNzAgMzEgMjggNjAgMjkgODggNiAxNTAgLTE5IDUxIC0xMjIgMjA1IC0xNDggMjIxIC02IDMgLTMyIC0yMSAtNTcgLTU0eiBtMTEwIC0xNzUgYzM1IC0zNCAzMyAtNzggLTQgLTExNiAtMzUgLTM1IC03MSAtMzcgLTEwNSAtNyAtNDAgMzUgLTQzIDc4IC0xMSAxMTYgMzQgNDEgODQgNDQgMTIwIDd6JyxcclxuICAgICAgICAgICAgZmlsbENvbG9yOiBjZXJ0eV92YXJzX2Zyb21fV1AudGhlbWVDb2xvcixcclxuICAgICAgICAgICAgZmlsbE9wYWNpdHk6IDEsXHJcbiAgICAgICAgICAgIHNjYWxlOiAwLjEsXHJcbiAgICAgICAgICAgIHN0cm9rZUNvbG9yOiBjZXJ0eV92YXJzX2Zyb21fV1AudGhlbWVDb2xvcixcclxuICAgICAgICAgICAgc3Ryb2tlV2VpZ2h0OiAxLFxyXG4gICAgICAgICAgICBhbmNob3I6IG5ldyBnb29nbGUubWFwcy5Qb2ludCgxODUsIDUwMClcclxuICAgICAgICB9LFxyXG4gICAgICAgIHRpdGxlOiAnSGVsbG8gV29ybGQhJ1xyXG4gICAgfSk7XHJcblxyXG4gICAgLyp2YXIgbWFya2VyID0gbmV3IE1hcmtlcih7XHJcbiAgICAgbWFwOiBtYXAsXHJcbiAgICAgcG9zaXRpb246IGxhdGxuZyxcclxuICAgICBpY29uOiB7XHJcbiAgICAgcGF0aDogU1FVQVJFX1BJTixcclxuICAgICBmaWxsQ29sb3I6ICcnLFxyXG4gICAgIGZpbGxPcGFjaXR5OiAwLFxyXG4gICAgIHN0cm9rZUNvbG9yOiAnJyxcclxuICAgICBzdHJva2VXZWlnaHQ6IDBcclxuICAgICB9LFxyXG4gICAgIG1hcF9pY29uX2xhYmVsOiAnPHNwYW4gY2xhc3M9XCJtYXAtaWNvbiBtYXAtaWNvbi1wb3N0YWwtY29kZVwiPjwvc3Bhbj4nXHJcbiAgICAgfSk7Ki9cclxuXHJcbiAgICAvLyBLZWVwIE1hcmtlciBpbiBDZW50ZXJcclxuICAgIGdvb2dsZS5tYXBzLmV2ZW50LmFkZERvbUxpc3RlbmVyKHdpbmRvdywgJ3Jlc2l6ZScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBtYXAuc2V0Q2VudGVyKGxhdGxuZyk7XHJcbiAgICB9KTtcclxufSIsIi8qKlxyXG4gKiBDZXJ0eSBPcHRpb25zXHJcbiAqL1xyXG5cclxudmFyIG5hdlN0aWt5ID0gZmFsc2U7XHJcbmlmKGNlcnR5X3ZhcnNfZnJvbV9XUC5lbmFibGVfc3RpY2t5ID09IDEpIHsgbmF2U3Rpa3kgPSB0cnVlOyB9XHJcblxyXG5cclxudmFyIGNlcnR5ID0ge1xyXG4gICAgdmFyczoge1xyXG4gICAgICAgIC8vIFNldCB0aGVtZSBydGwgbW9kZVxyXG4gICAgICAgIHJ0bDogZmFsc2UsXHJcblxyXG4gICAgICAgIC8vIFNldCB0aGVtZSBwcmltYXJ5IGNvbG9yXHJcbiAgICAgICAgdGhlbWVDb2xvcjogY2VydHlfdmFyc19mcm9tX1dQLnRoZW1lQ29sb3IsXHJcblxyXG4gICAgICAgIC8vIFNldCBtaWRkbGUgc2NyZWVuIHNpemUsIG11c3QgaGF2ZSB0aGUgc2FtZSB2YWx1ZSBhcyBpbiB0aGUgX3ZhcmlhYmxlcy5zY3NzXHJcbiAgICAgICAgc2NyZWVuTWQ6ICc5OTJweCdcclxuICAgIH0sXHJcblxyXG4gICAgbmF2OiB7XHJcbiAgICAgICAgaGVpZ2h0OiAnYXV0bycsIC8vIHVzZSAnYXV0bycgb3Igc29tZSBmaXhlZCB2YWx1ZSwgZm9yIGV4YW1wbGUgNDgwcHhcclxuICAgICAgICBhcnJvdzogZmFsc2UsIC8vIGFjdGl2YXRlIGFycm93IHRvIHNjcm9sbCBkb3duIG1lbnUgaXRlbXMsXHJcbiAgICAgICAgc3RpY2t5OiB7XHJcbiAgICAgICAgICAgIHRvcDogXCItMXB4XCIsIC8vIHN0aWNreSBwb3NpdGlvbiBmcm9tIHRvcFxyXG4gICAgICAgICAgICBhY3RpdmU6IG5hdlN0aWt5IC8vIGFjdGl2YXRlIHN0aWNreSBwcm9wZXJ0eSBvbiB3aW5kb3cgc2Nyb2xsXHJcbiAgICAgICAgfSxcclxuICAgICAgICB0b29sdGlwOiB7XHJcbiAgICAgICAgICAgIGFjdGl2ZTogdHJ1ZVxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgc2lkZUJveDoge1xyXG4gICAgICAgIHN0aWNreToge1xyXG4gICAgICAgICAgICB0b3A6IFwiMjBweFwiLCAvLyBzdGlja3kgcG9zaXRpb24gZnJvbSB0b3BcclxuICAgICAgICAgICAgYWN0aXZlOiBmYWxzZSAvLyBhY3RpdmF0ZSBzdGlja3kgcHJvcGVydHkgb24gd2luZG93IHNjcm9sbFxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgcHJvZ3Jlc3M6IHtcclxuICAgICAgICBhbmltYXRpb246IHRydWUsIC8vIGFuaW1hdGUgb24gd2luZG93IHNjcm9sbFxyXG4gICAgICAgIHRleHRDb2xvcjogJ2luaGVyaXQnLCAvLyBzZXQgdGV4dCBjb2xvclxyXG4gICAgICAgIHRyYWlsQ29sb3I6ICdyZ2JhKDAsMCwwLDAuMDcpJyAvLyBzZXQgdHJhaWwgY29sb3JcclxuICAgIH1cclxufTsiLCIvKlxyXG4gKiBqUXVlcnkgT25lIFBhZ2UgTmF2IFBsdWdpblxyXG4gKiBodHRwOi8vZ2l0aHViLmNvbS9kYXZpc3QxMS9qUXVlcnktT25lLVBhZ2UtTmF2XHJcbiAqXHJcbiAqIENvcHlyaWdodCAoYykgMjAxMCBUcmV2b3IgRGF2aXMgKGh0dHA6Ly90cmV2b3JkYXZpcy5uZXQpXHJcbiAqIER1YWwgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBhbmQgR1BMIGxpY2Vuc2VzLlxyXG4gKiBVc2VzIHRoZSBzYW1lIGxpY2Vuc2UgYXMgalF1ZXJ5LCBzZWU6XHJcbiAqIGh0dHA6Ly9qcXVlcnkub3JnL2xpY2Vuc2VcclxuICpcclxuICogQHZlcnNpb24gMy4wLjBcclxuICpcclxuICogRXhhbXBsZSB1c2FnZTpcclxuICogJCgnI25hdicpLm9uZVBhZ2VOYXYoe1xyXG4gKiAgIGN1cnJlbnRDbGFzczogJ2N1cnJlbnQnLFxyXG4gKiAgIGNoYW5nZUhhc2g6IGZhbHNlLFxyXG4gKiAgIHNjcm9sbFNwZWVkOiA3NTBcclxuICogfSk7XHJcbiAqL1xyXG5cclxuOyhmdW5jdGlvbigkLCB3aW5kb3csIGRvY3VtZW50LCB1bmRlZmluZWQpe1xyXG5cclxuICAgIC8vIG91ciBwbHVnaW4gY29uc3RydWN0b3JcclxuICAgIHZhciBPbmVQYWdlTmF2ID0gZnVuY3Rpb24oZWxlbSwgb3B0aW9ucyl7XHJcbiAgICAgICAgdGhpcy5lbGVtID0gZWxlbTtcclxuICAgICAgICB0aGlzLiRlbGVtID0gJChlbGVtKTtcclxuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xyXG4gICAgICAgIHRoaXMubWV0YWRhdGEgPSB0aGlzLiRlbGVtLmRhdGEoJ3BsdWdpbi1vcHRpb25zJyk7XHJcbiAgICAgICAgdGhpcy4kd2luID0gJCh3aW5kb3cpO1xyXG4gICAgICAgIHRoaXMuc2VjdGlvbnMgPSB7fTtcclxuICAgICAgICB0aGlzLmRpZFNjcm9sbCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuJGRvYyA9ICQoZG9jdW1lbnQpO1xyXG4gICAgICAgIHRoaXMuZG9jSGVpZ2h0ID0gdGhpcy4kZG9jLmhlaWdodCgpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyB0aGUgcGx1Z2luIHByb3RvdHlwZVxyXG4gICAgT25lUGFnZU5hdi5wcm90b3R5cGUgPSB7XHJcbiAgICAgICAgZGVmYXVsdHM6IHtcclxuICAgICAgICAgICAgbmF2SXRlbXM6ICdhJyxcclxuICAgICAgICAgICAgY3VycmVudENsYXNzOiAnY3VycmVudCcsXHJcbiAgICAgICAgICAgIGNoYW5nZUhhc2g6IGZhbHNlLFxyXG4gICAgICAgICAgICBlYXNpbmc6ICdzd2luZycsXHJcbiAgICAgICAgICAgIGZpbHRlcjogJycsXHJcbiAgICAgICAgICAgIHNjcm9sbFNwZWVkOiA3NTAsXHJcbiAgICAgICAgICAgIHNjcm9sbFRocmVzaG9sZDogMC41LFxyXG4gICAgICAgICAgICBiZWdpbjogZmFsc2UsXHJcbiAgICAgICAgICAgIGVuZDogZmFsc2UsXHJcbiAgICAgICAgICAgIHNjcm9sbENoYW5nZTogZmFsc2VcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBpbml0OiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgLy8gSW50cm9kdWNlIGRlZmF1bHRzIHRoYXQgY2FuIGJlIGV4dGVuZGVkIGVpdGhlclxyXG4gICAgICAgICAgICAvLyBnbG9iYWxseSBvciB1c2luZyBhbiBvYmplY3QgbGl0ZXJhbC5cclxuICAgICAgICAgICAgdGhpcy5jb25maWcgPSAkLmV4dGVuZCh7fSwgdGhpcy5kZWZhdWx0cywgdGhpcy5vcHRpb25zLCB0aGlzLm1ldGFkYXRhKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuJG5hdiA9IHRoaXMuJGVsZW0uZmluZCh0aGlzLmNvbmZpZy5uYXZJdGVtcyk7XHJcblxyXG4gICAgICAgICAgICAvL0ZpbHRlciBhbnkgbGlua3Mgb3V0IG9mIHRoZSBuYXZcclxuICAgICAgICAgICAgaWYodGhpcy5jb25maWcuZmlsdGVyICE9PSAnJykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy4kbmF2ID0gdGhpcy4kbmF2LmZpbHRlcih0aGlzLmNvbmZpZy5maWx0ZXIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvL0hhbmRsZSBjbGlja3Mgb24gdGhlIG5hdlxyXG4gICAgICAgICAgICB0aGlzLiRuYXYub24oJ2NsaWNrLm9uZVBhZ2VOYXYnLCAkLnByb3h5KHRoaXMuaGFuZGxlQ2xpY2ssIHRoaXMpKTtcclxuXHJcbiAgICAgICAgICAgIC8vR2V0IHRoZSBzZWN0aW9uIHBvc2l0aW9uc1xyXG4gICAgICAgICAgICB0aGlzLmdldFBvc2l0aW9ucygpO1xyXG5cclxuICAgICAgICAgICAgLy9IYW5kbGUgc2Nyb2xsIGNoYW5nZXNcclxuICAgICAgICAgICAgdGhpcy5iaW5kSW50ZXJ2YWwoKTtcclxuXHJcbiAgICAgICAgICAgIC8vVXBkYXRlIHRoZSBwb3NpdGlvbnMgb24gcmVzaXplIHRvb1xyXG4gICAgICAgICAgICB0aGlzLiR3aW4ub24oJ3Jlc2l6ZS5vbmVQYWdlTmF2JywgJC5wcm94eSh0aGlzLmdldFBvc2l0aW9ucywgdGhpcykpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgYWRqdXN0TmF2OiBmdW5jdGlvbihzZWxmLCAkcGFyZW50KSB7XHJcbiAgICAgICAgICAgIHNlbGYuJGVsZW0uZmluZCgnLicgKyBzZWxmLmNvbmZpZy5jdXJyZW50Q2xhc3MpLnJlbW92ZUNsYXNzKHNlbGYuY29uZmlnLmN1cnJlbnRDbGFzcyk7XHJcbiAgICAgICAgICAgICRwYXJlbnQuYWRkQ2xhc3Moc2VsZi5jb25maWcuY3VycmVudENsYXNzKTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBiaW5kSW50ZXJ2YWw6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgICAgIHZhciBkb2NIZWlnaHQ7XHJcblxyXG4gICAgICAgICAgICBzZWxmLiR3aW4ub24oJ3Njcm9sbC5vbmVQYWdlTmF2JywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLmRpZFNjcm9sbCA9IHRydWU7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgc2VsZi50ID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBkb2NIZWlnaHQgPSBzZWxmLiRkb2MuaGVpZ2h0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy9JZiBpdCB3YXMgc2Nyb2xsZWRcclxuICAgICAgICAgICAgICAgIGlmKHNlbGYuZGlkU2Nyb2xsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5kaWRTY3JvbGwgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLnNjcm9sbENoYW5nZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vSWYgdGhlIGRvY3VtZW50IGhlaWdodCBjaGFuZ2VzXHJcbiAgICAgICAgICAgICAgICBpZihkb2NIZWlnaHQgIT09IHNlbGYuZG9jSGVpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5kb2NIZWlnaHQgPSBkb2NIZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5nZXRQb3NpdGlvbnMoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSwgMjUwKTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBnZXRIYXNoOiBmdW5jdGlvbigkbGluaykge1xyXG4gICAgICAgICAgICByZXR1cm4gJGxpbmsuYXR0cignaHJlZicpLnNwbGl0KCcjJylbMV07XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgZ2V0UG9zaXRpb25zOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgICAgICAgICB2YXIgbGlua0hyZWY7XHJcbiAgICAgICAgICAgIHZhciB0b3BQb3M7XHJcbiAgICAgICAgICAgIHZhciAkdGFyZ2V0O1xyXG5cclxuICAgICAgICAgICAgc2VsZi4kbmF2LmVhY2goZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBsaW5rSHJlZiA9IHNlbGYuZ2V0SGFzaCgkKHRoaXMpKTtcclxuICAgICAgICAgICAgICAgICR0YXJnZXQgPSAkKCcjJyArIGxpbmtIcmVmKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZigkdGFyZ2V0Lmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRvcFBvcyA9ICR0YXJnZXQub2Zmc2V0KCkudG9wO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuc2VjdGlvbnNbbGlua0hyZWZdID0gTWF0aC5yb3VuZCh0b3BQb3MpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBnZXRTZWN0aW9uOiBmdW5jdGlvbih3aW5kb3dQb3MpIHtcclxuICAgICAgICAgICAgdmFyIHJldHVyblZhbHVlID0gbnVsbDtcclxuICAgICAgICAgICAgdmFyIHdpbmRvd0hlaWdodCA9IE1hdGgucm91bmQodGhpcy4kd2luLmhlaWdodCgpICogdGhpcy5jb25maWcuc2Nyb2xsVGhyZXNob2xkKTtcclxuXHJcbiAgICAgICAgICAgIGZvcih2YXIgc2VjdGlvbiBpbiB0aGlzLnNlY3Rpb25zKSB7XHJcbiAgICAgICAgICAgICAgICBpZigodGhpcy5zZWN0aW9uc1tzZWN0aW9uXSAtIHdpbmRvd0hlaWdodCkgPCB3aW5kb3dQb3MpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm5WYWx1ZSA9IHNlY3Rpb247XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiByZXR1cm5WYWx1ZTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBoYW5kbGVDbGljazogZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgICAgIHZhciAkbGluayA9ICQoZS5jdXJyZW50VGFyZ2V0KTtcclxuICAgICAgICAgICAgdmFyICRwYXJlbnQgPSAkbGluay5wYXJlbnQoKTtcclxuICAgICAgICAgICAgdmFyIG5ld0xvYyA9ICcjJyArIHNlbGYuZ2V0SGFzaCgkbGluayk7XHJcblxyXG4gICAgICAgICAgICBpZighJHBhcmVudC5oYXNDbGFzcyhzZWxmLmNvbmZpZy5jdXJyZW50Q2xhc3MpKSB7XHJcbiAgICAgICAgICAgICAgICAvL1N0YXJ0IGNhbGxiYWNrXHJcbiAgICAgICAgICAgICAgICBpZihzZWxmLmNvbmZpZy5iZWdpbikge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuY29uZmlnLmJlZ2luKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy9DaGFuZ2UgdGhlIGhpZ2hsaWdodGVkIG5hdiBpdGVtXHJcbiAgICAgICAgICAgICAgICBzZWxmLmFkanVzdE5hdihzZWxmLCAkcGFyZW50KTtcclxuXHJcbiAgICAgICAgICAgICAgICAvL1JlbW92aW5nIHRoZSBhdXRvLWFkanVzdCBvbiBzY3JvbGxcclxuICAgICAgICAgICAgICAgIHNlbGYudW5iaW5kSW50ZXJ2YWwoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvL1Njcm9sbCB0byB0aGUgY29ycmVjdCBwb3NpdGlvblxyXG4gICAgICAgICAgICAgICAgc2VsZi5zY3JvbGxUbyhuZXdMb2MsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vRG8gd2UgbmVlZCB0byBjaGFuZ2UgdGhlIGhhc2g/XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoc2VsZi5jb25maWcuY2hhbmdlSGFzaCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaGFzaCA9IG5ld0xvYztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vQWRkIHRoZSBhdXRvLWFkanVzdCBvbiBzY3JvbGwgYmFjayBpblxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuYmluZEludGVydmFsKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vRW5kIGNhbGxiYWNrXHJcbiAgICAgICAgICAgICAgICAgICAgaWYoc2VsZi5jb25maWcuZW5kKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuY29uZmlnLmVuZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgc2Nyb2xsQ2hhbmdlOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdmFyIHdpbmRvd1RvcCA9IHRoaXMuJHdpbi5zY3JvbGxUb3AoKTtcclxuICAgICAgICAgICAgdmFyIHBvc2l0aW9uID0gdGhpcy5nZXRTZWN0aW9uKHdpbmRvd1RvcCk7XHJcbiAgICAgICAgICAgIHZhciAkcGFyZW50O1xyXG5cclxuICAgICAgICAgICAgLy9JZiB0aGUgcG9zaXRpb24gaXMgc2V0XHJcbiAgICAgICAgICAgIGlmKHBvc2l0aW9uICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAkcGFyZW50ID0gdGhpcy4kZWxlbS5maW5kKCdhW2hyZWYkPVwiIycgKyBwb3NpdGlvbiArICdcIl0nKS5wYXJlbnQoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvL0lmIGl0J3Mgbm90IGFscmVhZHkgdGhlIGN1cnJlbnQgc2VjdGlvblxyXG4gICAgICAgICAgICAgICAgaWYoISRwYXJlbnQuaGFzQ2xhc3ModGhpcy5jb25maWcuY3VycmVudENsYXNzKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vQ2hhbmdlIHRoZSBoaWdobGlnaHRlZCBuYXYgaXRlbVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWRqdXN0TmF2KHRoaXMsICRwYXJlbnQpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvL0lmIHRoZXJlIGlzIGEgc2Nyb2xsQ2hhbmdlIGNhbGxiYWNrXHJcbiAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5jb25maWcuc2Nyb2xsQ2hhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnLnNjcm9sbENoYW5nZSgkcGFyZW50KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBzY3JvbGxUbzogZnVuY3Rpb24odGFyZ2V0LCBjYWxsYmFjaykge1xyXG4gICAgICAgICAgICB2YXIgb2Zmc2V0ID0gJCh0YXJnZXQpLm9mZnNldCgpLnRvcDtcclxuICAgICAgICAgICAgaWYoICQodGFyZ2V0KS5jbG9zZXN0KCcuY3J0LXBhcGVyLWxheWVycycpLmhhc0NsYXNzKCdjcnQtYW5pbWF0ZScpICl7XHJcbiAgICAgICAgICAgICAgICBvZmZzZXQgPSBvZmZzZXQgLSAxNDU7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBvZmZzZXQgPSBvZmZzZXQgLSA0NTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgJCgnaHRtbCwgYm9keScpLmFuaW1hdGUoe1xyXG4gICAgICAgICAgICAgICAgc2Nyb2xsVG9wOiBvZmZzZXRcclxuICAgICAgICAgICAgfSwgdGhpcy5jb25maWcuc2Nyb2xsU3BlZWQsIHRoaXMuY29uZmlnLmVhc2luZywgY2FsbGJhY2spO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIHVuYmluZEludGVydmFsOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnQpO1xyXG4gICAgICAgICAgICB0aGlzLiR3aW4udW5iaW5kKCdzY3JvbGwub25lUGFnZU5hdicpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgT25lUGFnZU5hdi5kZWZhdWx0cyA9IE9uZVBhZ2VOYXYucHJvdG90eXBlLmRlZmF1bHRzO1xyXG5cclxuICAgICQuZm4ub25lUGFnZU5hdiA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBuZXcgT25lUGFnZU5hdih0aGlzLCBvcHRpb25zKS5pbml0KCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxufSkoIGpRdWVyeSwgd2luZG93ICwgZG9jdW1lbnQgKTsiLCIvKipcclxuICogQ2VydHkgTmF2aWdhdGlvblxyXG4gKi9cclxuXHJcbi8vIE5hdmlnYXRpb24gV2l0aCBTY3JvbGwgYW5kIEFycm93XHJcbmNlcnR5Lm5hdi5pbml0U2Nyb2xsID0gZnVuY3Rpb24oIGVsICl7XHJcbiAgICAvLyBTZXQgTmF2IEhlaWdodFxyXG4gICAgLy8gY2VydHkubmF2LnNjcm9sbCA9IGVsO1xyXG5cclxuICAgIGVsLmhlaWdodChlbC5oZWlnaHQoKSkuYW5pbWF0ZSh7aGVpZ2h0OiBjZXJ0eS5uYXYuaGVpZ2h0fSwgNzAwLCBmdW5jdGlvbigpe1xyXG5cclxuICAgICAgICAvLyBNb3VzZSBTY3JvbGxcclxuICAgICAgICBlbC5tQ3VzdG9tU2Nyb2xsYmFyKHtcclxuICAgICAgICAgICAgYXhpczogXCJ5XCIsXHJcbiAgICAgICAgICAgIHNjcm9sbGJhclBvc2l0aW9uOiBcIm91dHNpZGVcIlxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gQXJyb3cgU2Nyb2xsXHJcbiAgICBpZiAoY2VydHkubmF2LmFycm93KXtcclxuICAgICAgICBqUXVlcnkoXCIjY3J0LW5hdi10b29sc1wiKS5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XHJcblxyXG4gICAgICAgIGpRdWVyeShcIiNjcnQtbmF2LWFycm93XCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBlbC5tQ3VzdG9tU2Nyb2xsYmFyKCdzY3JvbGxUbycsICctPScrY2VydHkubmF2LmhlaWdodCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn07XHJcblxyXG4vLyBTdGlja3kgTmF2aWdhdGlvblxyXG5jZXJ0eS5uYXYuZXhpc3RzID0gZmFsc2U7XHJcbmNlcnR5Lm5hdi5tYWtlU3RpY2t5ID0gZnVuY3Rpb24oKXtcclxuXHJcbiAgICAvLyBjaGVjayBzdGlja3kgb3B0aW9uLCBkZXZpY2UgdHlwZSBhbmQgc2NyZWVuIHNpemVcclxuICAgIGlmICggdGhpcy5zdGlja3kuYWN0aXZlICYmICFjZXJ0eS52YXJzLm1vYmlsZSAmJiBNb2Rlcm5penIubXEoJyhtaW4td2lkdGg6ICcgKyBjZXJ0eS52YXJzLnNjcmVlbk1kICsgJyknKSApIHtcclxuXHJcbiAgICAgICAgLy8gY2hlY2sgaWYgbmF2IG5vZGVzIGV4aXN0c1xyXG4gICAgICAgIGlmICggdGhpcy5leGlzdHMgKXtcclxuXHJcbiAgICAgICAgICAgIC8vIGNoZWNrIGlmIHdpbmRvdyBzY3JvbGwgcGFzcyBlbGVtZW50XHJcbiAgICAgICAgICAgIGlmICggY2VydHkudmFycy53aW5kb3dTY3JvbGxUb3AgPiB0aGlzLndyYXAub2Zmc2V0KCkudG9wICkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5lbC5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgICd0b3AnOiB0aGlzLnN0aWNreS50b3AsXHJcbiAgICAgICAgICAgICAgICAgICAgJ2xlZnQnOiB0aGlzLndyYXAub2Zmc2V0KCkubGVmdCxcclxuICAgICAgICAgICAgICAgICAgICAnd2lkdGgnOiB0aGlzLndyYXAud2lkdGgoKSxcclxuICAgICAgICAgICAgICAgICAgICAnYm90dG9tJzogJ2F1dG8nLFxyXG4gICAgICAgICAgICAgICAgICAgICdwb3NpdGlvbic6ICdmaXhlZCdcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5lbC5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgICd0b3AnOiAnMCcsXHJcbiAgICAgICAgICAgICAgICAgICAgJ2xlZnQnOiAnYXV0bycsXHJcbiAgICAgICAgICAgICAgICAgICAgJ3dpZHRoJzogJ2F1dG8nLFxyXG4gICAgICAgICAgICAgICAgICAgICdib3R0b20nOiAnYXV0bycsXHJcbiAgICAgICAgICAgICAgICAgICAgJ3Bvc2l0aW9uJzogJ3JlbGF0aXZlJ1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmVsID0galF1ZXJ5KCcjY3J0LW5hdi1pbm5lcicpO1xyXG4gICAgICAgICAgICB0aGlzLndyYXAgPSBqUXVlcnkoJyNjcnQtbmF2LXdyYXAnKTtcclxuXHJcbiAgICAgICAgICAgIGlmICggdGhpcy5lbC5sZW5ndGggPiAwICYmIHRoaXMud3JhcC5sZW5ndGggPiAwICkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5leGlzdHMgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59O1xyXG5cclxuLy8gTmF2aWdhdGlvbiBUb29sdGlwc1xyXG5jZXJ0eS5uYXYudG9vbHRpcC5lbCA9ICcnO1xyXG5jZXJ0eS5uYXYudG9vbHRpcC50aW1lciA9IDA7XHJcblxyXG5jZXJ0eS5uYXYudG9vbHRpcC5zaG93ID0gZnVuY3Rpb24oY3VycmVudCl7XHJcbiAgICBjZXJ0eS5uYXYudG9vbHRpcC50aW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICBjZXJ0eS5uYXYudG9vbHRpcC5lbCA9IGpRdWVyeSgnPGRpdiBjbGFzcz1cImNydC10b29sdGlwXCI+PC9kaXY+Jyk7XHJcblxyXG4gICAgICAgIC8vIEluaXQgdmFyc1xyXG4gICAgICAgIHZhciB0b3AgPSBjdXJyZW50Lm9mZnNldCgpLnRvcDtcclxuICAgICAgICB2YXIgbGVmdCA9IGN1cnJlbnQub2Zmc2V0KCkubGVmdDtcclxuICAgICAgICB2YXIgcmlnaHQgPSBsZWZ0ICsgY3VycmVudC5vdXRlcldpZHRoKCk7XHJcbiAgICAgICAgdmFyIHdpZHRoID0gY3VycmVudC5vdXRlcldpZHRoKCk7XHJcbiAgICAgICAgdmFyIGhlaWdodCA9IDQ7XHJcblxyXG4gICAgICAgIC8vIEFwcGVuZCB0b29sdGlwXHJcbiAgICAgICAgY2VydHkudmFycy5ib2R5LmFwcGVuZCggY2VydHkubmF2LnRvb2x0aXAuZWwgKTtcclxuXHJcbiAgICAgICAgLy8gU2V0IHRvb2x0aXAgdGV4dFxyXG4gICAgICAgIGNlcnR5Lm5hdi50b29sdGlwLmVsLnRleHQoIGN1cnJlbnQuZGF0YSgndG9vbHRpcCcpICk7XHJcblxyXG4gICAgICAgIC8vIFBvc2l0aW9uaW5nIHRvb2x0aXBcclxuICAgICAgICBpZiAocmlnaHQgKyBjZXJ0eS5uYXYudG9vbHRpcC5lbC5vdXRlcldpZHRoKCkgPCBjZXJ0eS52YXJzLndpbmRvd1cpIHtcclxuICAgICAgICAgICAgY2VydHkubmF2LnRvb2x0aXAuZWwuYWRkQ2xhc3MoJ2Fycm93LWxlZnQnKS5jc3Moe1wibGVmdFwiOiByaWdodCArIFwicHhcIiwgXCJ0b3BcIjogKHRvcCArIGhlaWdodCkgKyBcInB4XCJ9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjZXJ0eS5uYXYudG9vbHRpcC5lbC5hZGRDbGFzcygnYXJyb3ctcmlnaHQgdGV4dC1yaWdodCcpLmNzcyh7XHJcbiAgICAgICAgICAgICAgICBcImxlZnRcIjogKGxlZnQgLSBjZXJ0eS5uYXYudG9vbHRpcC5lbC5vdXRlcldpZHRoKCkgLSAxMCkgKyBcInB4XCIsXHJcbiAgICAgICAgICAgICAgICBcInRvcFwiOiAodG9wICsgaGVpZ2h0KSArIFwicHhcIlxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFNob3cgVG9vbHRpcFxyXG4gICAgICAgIGNlcnR5Lm5hdi50b29sdGlwLmVsLmZhZGVJbigxNTApO1xyXG5cclxuICAgIH0sIDE1MCk7XHJcbn07XHJcblxyXG5jZXJ0eS5uYXYudG9vbHRpcC5oaWRlID0gZnVuY3Rpb24oKXtcclxuICAgIGNsZWFyVGltZW91dChjZXJ0eS5uYXYudG9vbHRpcC50aW1lcik7XHJcbiAgICBpZiAoY2VydHkubmF2LnRvb2x0aXAuZWwubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGNlcnR5Lm5hdi50b29sdGlwLmVsLmZhZGVPdXQoMTUwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGNlcnR5Lm5hdi50b29sdGlwLmVsLnJlbW92ZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59OyIsIi8qKlxyXG4gKiBDZXJ0eSBTaWRlIEJveFxyXG4gKi9cclxuY2VydHkuc2lkZUJveC5leGlzdHMgPSBmYWxzZTtcclxuY2VydHkuc2lkZUJveC5tYWtlU3RpY2t5ID0gZnVuY3Rpb24oKXtcclxuXHJcbiAgICAvLyBjaGVjayBzdGlja3kgb3B0aW9uLCBkZXZpY2UgdHlwZSBhbmQgc2NyZWVuIHNpemVcclxuICAgIGlmICggdGhpcy5zdGlja3kuYWN0aXZlICYmICFjZXJ0eS52YXJzLm1vYmlsZSAmJiBNb2Rlcm5penIubXEoJyhtaW4td2lkdGg6ICcgKyBjZXJ0eS52YXJzLnNjcmVlbk1kICsgJyknKSApIHtcclxuXHJcbiAgICAgICAgLy8gY2hlY2sgaWYgbmF2IG5vZGVzIGV4aXN0c1xyXG4gICAgICAgIGlmICggdGhpcy5leGlzdHMgKXtcclxuXHJcbiAgICAgICAgICAgIC8vIGNoZWNrIGlmIHdpbmRvdyBzY3JvbGwgcGFzcyBlbGVtZW50XHJcbiAgICAgICAgICAgIGlmICggY2VydHkudmFycy53aW5kb3dTY3JvbGxUb3AgPiB0aGlzLndyYXAub2Zmc2V0KCkudG9wICkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5lbC5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgICd0b3AnOiB0aGlzLnN0aWNreS50b3AsXHJcbiAgICAgICAgICAgICAgICAgICAgJ2xlZnQnOiB0aGlzLndyYXAub2Zmc2V0KCkubGVmdCxcclxuICAgICAgICAgICAgICAgICAgICAnd2lkdGgnOiB0aGlzLndyYXAud2lkdGgoKSxcclxuICAgICAgICAgICAgICAgICAgICAnYm90dG9tJzogJ2F1dG8nLFxyXG4gICAgICAgICAgICAgICAgICAgICdwb3NpdGlvbic6ICdmaXhlZCdcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5lbC5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgICd0b3AnOiAnMCcsXHJcbiAgICAgICAgICAgICAgICAgICAgJ2xlZnQnOiAnYXV0bycsXHJcbiAgICAgICAgICAgICAgICAgICAgJ3dpZHRoJzogJ2F1dG8nLFxyXG4gICAgICAgICAgICAgICAgICAgICdib3R0b20nOiAnYXV0bycsXHJcbiAgICAgICAgICAgICAgICAgICAgJ3Bvc2l0aW9uJzogJ3JlbGF0aXZlJ1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmVsID0galF1ZXJ5KCcjY3J0LXNpZGUtYm94Jyk7XHJcbiAgICAgICAgICAgIHRoaXMud3JhcCA9IGpRdWVyeSgnI2NydC1zaWRlLWJveC13cmFwJyk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIHRoaXMuZWwubGVuZ3RoID4gMCAmJiB0aGlzLndyYXAubGVuZ3RoID4gMCApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZXhpc3RzID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufTsiLCIvKipcclxuICogQ2VydHkgU2xpZGVyXHJcbiAqL1xyXG5cclxuLy8gU2xpZGVyXHJcbmNlcnR5LnNsaWRlciA9IGZ1bmN0aW9uKHNsaWRlcil7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNsaWRlci5sZW5ndGg7IGkrKykge1xyXG5cclxuICAgICAgIGlmKCBqUXVlcnkoc2xpZGVyW2ldKS5kYXRhKFwiaW5pdFwiKSAhPSBcIm5vbmVcIiApe1xyXG4gICAgICAgICAgIGpRdWVyeShzbGlkZXJbaV0pLnNsaWNrKCk7XHJcbiAgICAgICB9XHJcbiAgICB9XHJcbn07XHJcblxyXG4vLyBDYXJvdXNlbFxyXG5jZXJ0eS5jYXJvdXNlbCA9IGZ1bmN0aW9uKGNhcm91c2VsKXtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2Fyb3VzZWwubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBpZiggalF1ZXJ5KGNhcm91c2VsW2ldKS5kYXRhKFwiaW5pdFwiKSAhPT0gXCJub25lXCIgKXtcclxuICAgICAgICAgICAgalF1ZXJ5KGNhcm91c2VsW2ldKS5zbGljayh7XHJcbiAgICAgICAgICAgICAgICBcImRvdHNcIiA6IHRydWVcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59O1xyXG5cclxuIiwiLyoqXHJcbiAqIENlcnR5IFBvcnRmb2xpb1xyXG4gKi9cclxuXHJcbmNlcnR5LnBvcnRmb2xpbyA9IHtcclxuICAgIHBvcHVwU2xpZGVyOiAnJyxcclxuICAgIHBvcHVwQ2Fyb3VzZWw6ICcnLFxyXG4gICAgY3VycmVudEVtYmVkOiBmYWxzZSxcclxuICAgIGN1cnJlbnRFbWJlZFR5cGU6IGZhbHNlLFxyXG5cclxuICAgIGluaXRHcmlkOiBmdW5jdGlvbihlbCl7XHJcbiAgICAgICAgLy8gaXNvdG9wZSBpbml0aWFsaXphdGlvblxyXG4gICAgICAgIHZhciBncmlkID0gZWwuaXNvdG9wZSh7XHJcbiAgICAgICAgICAgIGlzT3JpZ2luTGVmdDogIWNlcnR5LnZhcnMucnRsLFxyXG4gICAgICAgICAgICBpdGVtU2VsZWN0b3I6ICcucGYtZ3JpZC1pdGVtJyxcclxuICAgICAgICAgICAgcGVyY2VudFBvc2l0aW9uOiB0cnVlLFxyXG4gICAgICAgICAgICBtYXNvbnJ5OiB7XHJcbiAgICAgICAgICAgICAgICBjb2x1bW5XaWR0aDogJy5wZi1ncmlkLXNpemVyJ1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIGxheW91dCBpc290b3BlIGFmdGVyIGVhY2ggaW1hZ2UgbG9hZHNcclxuICAgICAgICBncmlkLmltYWdlc0xvYWRlZCgpLnByb2dyZXNzKCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgZ3JpZC5pc290b3BlKCdsYXlvdXQnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gaXNvdG9wZSBmaWx0ZXJcclxuICAgICAgICB2YXIgZmlsdGVyID0gZWwuY2xvc2VzdCgnLnBmLXdyYXAnKS5maW5kKCcucGYtZmlsdGVyJyk7XHJcbiAgICAgICAgaWYgKGZpbHRlci5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIHZhciBmaWx0ZXJfYnRuID0gZmlsdGVyLmZpbmQoJ2J1dHRvbicpO1xyXG4gICAgICAgICAgICB2YXIgZmlsdGVyX2J0bl9maXJzdCA9IGpRdWVyeSgnLnBmLWZpbHRlciBidXR0b246Zmlyc3QtY2hpbGQnKTtcclxuXHJcbiAgICAgICAgICAgIGZpbHRlcl9idG5fZmlyc3QuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG5cclxuICAgICAgICAgICAgZmlsdGVyX2J0bi5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBmaWx0ZXJfYnRuLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgIGpRdWVyeSh0aGlzKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGZpbHRlclZhbHVlID0galF1ZXJ5KHRoaXMpLmF0dHIoJ2RhdGEtZmlsdGVyJyk7XHJcbiAgICAgICAgICAgICAgICBncmlkLmlzb3RvcGUoeyBmaWx0ZXI6IGZpbHRlclZhbHVlIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIG9wZW5Qb3B1cDogZnVuY3Rpb24oZWwpe1xyXG4gICAgICAgIC8vIGFkZCBvcGVuZWQgY2xhc3Mgb24gaHRtbFxyXG4gICAgICAgIGNlcnR5LnZhcnMuaHRtbC5hZGRDbGFzcygnY3J0LXBmLXBvcHVwLW9wZW5lZCcpO1xyXG5cclxuICAgICAgICAvLyBhcHBlbmQgcG9ydGZvbGlvIHBvcHVwXHJcbiAgICAgICAgdGhpcy5wb3B1cF93cmFwcGVyID0galF1ZXJ5KCc8ZGl2IGlkPVwicGYtcG9wdXAtd3JhcFwiPicrXHJcblx0XHRcdCc8YnV0dG9uIGlkPVwicGYtcG9wdXAtY2xvc2VcIj48aSBjbGFzcz1cImNydC1pY29uIGNydC1pY29uLWNsb3NlXCI+PC9pPjwvYnV0dG9uPicrXHJcbiAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwicGYtcG9wdXAtaW5uZXJcIj4nK1xyXG4gICAgICAgICAgICAnPGRpdiBjbGFzcz1cInBmLXBvcHVwLW1pZGRsZVwiPicrXHJcbiAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwicGYtcG9wdXAtY29udGFpbmVyXCI+JytcclxuICAgICAgICAgICAgJzxidXR0b24gaWQ9XCJwZi1wb3B1cC1jbG9zZVwiPjxpIGNsYXNzPVwicnNpY29uIHJzaWNvbi1jbG9zZVwiPjwvaT48L2J1dHRvbj4nK1xyXG4gICAgICAgICAgICAnPGRpdiBpZD1cInBmLXBvcHVwLWNvbnRlbnRcIiBjbGFzcz1cInBmLXBvcHVwLWNvbnRlbnRcIj48L2Rpdj4nK1xyXG4gICAgICAgICAgICAnPC9kaXY+JytcclxuICAgICAgICAgICAgJzwvZGl2PicrXHJcbiAgICAgICAgICAgICc8L2Rpdj4nK1xyXG4gICAgICAgICAgICAnPC9kaXY+Jyk7XHJcblxyXG4gICAgICAgIGNlcnR5LnZhcnMuYm9keS5hcHBlbmQoIHRoaXMucG9wdXBfd3JhcHBlciApO1xyXG5cclxuICAgICAgICAvLyBhZGQgcG9ydGZvbGlvIHBvcHVwIGNvbnRlbnRcclxuICAgICAgICB0aGlzLnBvcHVwX2NvbnRlbnQgPSBqUXVlcnkoJyNwZi1wb3B1cC1jb250ZW50Jyk7XHJcbiAgICAgICAgdGhpcy5wb3B1cF9jb250ZW50LmFwcGVuZCggZWwuY2xvbmUoKSApO1xyXG5cclxuICAgICAgICAvLyBwb3B1cCBzbGlkZXJcclxuICAgICAgICB0aGlzLnBvcHVwU2xpZGVyID0galF1ZXJ5KCcjcGYtcG9wdXAtY29udGVudCAucGYtcG9wdXAtbWVkaWEnKTtcclxuXHJcbiAgICAgICAgLy8gcG9wdXAgc2xpZGVyOiBvbiBpbml0XHJcbiAgICAgICAgdGhpcy5wb3B1cFNsaWRlci5vbignaW5pdCcsIGZ1bmN0aW9uKGV2ZW50LCBzbGljaykge1xyXG4gICAgICAgICAgICBjZXJ0eS5wb3J0Zm9saW8ubG9hZEVtYmVkKDApO1xyXG5cclxuICAgICAgICAgICAgLy8gTWFrZSBQb3J0Zm9saW8gUG9wdXAgVmlzaWJsZVxyXG4gICAgICAgICAgICBqUXVlcnkod2luZG93KS50cmlnZ2VyKCdyZXNpemUnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gcG9wdXAgc2xpZGVyOiBiZWZvcmUgY2hhbmdlXHJcbiAgICAgICAgdGhpcy5wb3B1cFNsaWRlci5vbignYmVmb3JlQ2hhbmdlJywgZnVuY3Rpb24gKGV2ZW50LCBzbGljaywgY3VycmVudFNsaWRlLCBuZXh0U2xpZGUpIHtcclxuXHJcbiAgICAgICAgICAgIC8vIFN0b3AgY3VycmVudCBzbGlkZSBpZnJhbWUvdmlkZW8gcGxheVxyXG4gICAgICAgICAgICBpZiggY2VydHkucG9ydGZvbGlvLmN1cnJlbnRFbWJlZCAmJiBjZXJ0eS5wb3J0Zm9saW8uY3VycmVudEVtYmVkVHlwZSApe1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChjZXJ0eS5wb3J0Zm9saW8uY3VycmVudEVtYmVkVHlwZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJpZnJhbWVcIjpcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpZnJhbWUgPSBjZXJ0eS5wb3J0Zm9saW8uY3VycmVudEVtYmVkLmZpbmQoJ2lmcmFtZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZnJhbWUuYXR0cignc3JjJywgaWZyYW1lLmF0dHIoJ3NyYycpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwidmlkZW9cIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZpZGVvID0gY2VydHkucG9ydGZvbGlvLmN1cnJlbnRFbWJlZC5maW5kKCd2aWRlbycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2aWRlb1swXS5wYXVzZSgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIExvYWQgbmV4dCBzbGlkZSBlbWJlZFxyXG4gICAgICAgICAgICBjZXJ0eS5wb3J0Zm9saW8ubG9hZEVtYmVkKG5leHRTbGlkZSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIHBvcHVwIHNsaWRlcjogaW5pdGlhbGl6ZVxyXG4gICAgICAgIHRoaXMucG9wdXBTbGlkZXIuc2xpY2soe1xyXG4gICAgICAgICAgICBzcGVlZDogNTAwLFxyXG4gICAgICAgICAgICBkb3RzOiBmYWxzZSxcclxuICAgICAgICAgICAgYXJyb3c6IHRydWUsXHJcbiAgICAgICAgICAgIGluZmluaXRlOiBmYWxzZSxcclxuICAgICAgICAgICAgc2xpZGVzVG9TaG93OiAxLFxyXG4gICAgICAgICAgICBhZGFwdGl2ZUhlaWdodDogdHJ1ZVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBwb3B1cCBjYXJvdXNlbFxyXG4gICAgICAgIHRoaXMucG9wdXBDYXJvdXNlbCA9IGpRdWVyeSgnI3BmLXBvcHVwLWNvbnRlbnQgLnBmLXJlbC1jYXJvdXNlbCcpO1xyXG5cclxuICAgICAgICAvLyBwb3B1cCBjYXJvdXNlbDogaW5pdGlhbGl6ZVxyXG4gICAgICAgIHRoaXMucG9wdXBDYXJvdXNlbC5zbGljayh7XHJcbiAgICAgICAgICAgIGRvdHM6IGZhbHNlLFxyXG4gICAgICAgICAgICBpbmZpbml0ZTogdHJ1ZSxcclxuICAgICAgICAgICAgc2xpZGVzVG9TaG93OiAzLFxyXG4gICAgICAgICAgICBzbGlkZXNUb1Njcm9sbDogMyxcclxuICAgICAgICAgICAgbGF6eUxvYWQ6ICdvbmRlbWFuZCdcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gbWFrZSBwb3J0Zm9saW8gcG9wdXAgdmlzaWJsZVxyXG4gICAgICAgIHRoaXMucG9wdXBfd3JhcHBlci5hZGRDbGFzcygncGYtb3BlbmVkJyk7XHJcblxyXG4gICAgICAgIC8vIGxvY2sgd2luZG93IHNjcm9sbFxyXG4gICAgICAgIGNlcnR5LmxvY2tTY3JvbGwoKTtcclxuICAgIH0sXHJcblxyXG4gICAgY2xvc2VQb3B1cDogZnVuY3Rpb24oZWwpIHtcclxuICAgICAgICAvLyByZW1vdmUgb3BlbmVkIGNsYXNzIGZyb20gaHRtbFxyXG4gICAgICAgIGNlcnR5LnZhcnMuaHRtbC5yZW1vdmVDbGFzcygnY3ItcG9ydGZvbGlvLW9wZW5lZCcpO1xyXG5cclxuICAgICAgICAvLyBtYWtlIHBvcnRmb2xpbyBwb3B1cCBpbnZpc2libGVcclxuICAgICAgICB0aGlzLnBvcHVwX3dyYXBwZXIucmVtb3ZlQ2xhc3MoJ3BmLW9wZW5lZCcpO1xyXG5cclxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIGNlcnR5LnBvcnRmb2xpby5wb3B1cF93cmFwcGVyLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICBjZXJ0eS51bmxvY2tTY3JvbGwoKTtcclxuICAgICAgICB9LCA1MDApO1xyXG4gICAgfSxcclxuXHJcbiAgICBsb2FkRW1iZWQ6IGZ1bmN0aW9uIChzbGlkZUluZGV4KSB7XHJcbiAgICAgICAgdmFyIGN1cnJlbnRFbWJlZCA9IGpRdWVyeSgnI3BmLXBvcHVwLWNvbnRlbnQgLnBmLXBvcHVwLXNsaWRlW2RhdGEtc2xpY2staW5kZXg9XCInICsgc2xpZGVJbmRleCArICdcIl0nKS5maW5kKCcucGYtcG9wdXAtZW1iZWQnKTtcclxuICAgICAgICB2YXIgY3VycmVudEVtYmVkVHlwZSA9IGpRdWVyeS50cmltKGN1cnJlbnRFbWJlZC5kYXRhKCd0eXBlJykpO1xyXG4gICAgICAgIHZhciBjdXJlbnRFbWJlZFVybCA9IGpRdWVyeS50cmltKGN1cnJlbnRFbWJlZC5kYXRhKCd1cmwnKSk7XHJcblxyXG4gICAgICAgIGNlcnR5LnBvcnRmb2xpby5jdXJyZW50RW1iZWQgPSBjdXJyZW50RW1iZWQ7XHJcbiAgICAgICAgY2VydHkucG9ydGZvbGlvLmN1cnJlbnRFbWJlZFR5cGUgPSBjdXJyZW50RW1iZWRUeXBlO1xyXG5cclxuICAgICAgICAvLyBDaGVjayBpZiAnY3VycmVudEVtYmVkJyBzdGlsbCBub3QgbG9hZGVkIHRoZW4gZG8gYWN0aW9uc1xyXG4gICAgICAgIGlmICghY3VycmVudEVtYmVkLmhhc0NsYXNzKCdwZi1lbWJlZC1sb2FkZWQnKSkge1xyXG5cclxuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgJ2N1cnJlbnRFbWJlZCcgdXJsIGFuZCB0eXBlIGFyZSBwcm92aWRlZFxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIGN1cnJlbnRFbWJlZFR5cGUgIT09IHR5cGVvZiB1bmRlZmluZWQgJiYgY3VycmVudEVtYmVkVHlwZSAhPT0gZmFsc2UgJiYgY3VycmVudEVtYmVkVHlwZSAhPT0gXCJcIiAmJiB0eXBlb2YgY3VyZW50RW1iZWRVcmwgIT09IHR5cGVvZiB1bmRlZmluZWQgJiYgY3VyZW50RW1iZWRVcmwgIT09IGZhbHNlICYmIGN1cmVudEVtYmVkVXJsICE9PSBcIlwiKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gU2V0IGVtYmVkIGRpbWVuc2lvbnMgaWYgcHJvdmlkZWRcclxuICAgICAgICAgICAgICAgIHZhciBlbWJlZFcgPSBqUXVlcnkudHJpbShjdXJyZW50RW1iZWQuZGF0YSgnd2lkdGgnKSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgZW1iZWRIID0galF1ZXJ5LnRyaW0oY3VycmVudEVtYmVkLmRhdGEoJ2hlaWdodCcpKTtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZW1iZWRXICE9PSB0eXBlb2YgdW5kZWZpbmVkICYmIGVtYmVkVyAhPT0gZmFsc2UgJiYgZW1iZWRXICE9PSBcIlwiICYmIHR5cGVvZiBlbWJlZEggIT09IHR5cGVvZiB1bmRlZmluZWQgJiYgZW1iZWRIICE9PSBmYWxzZSAmJiBlbWJlZEggIT09IFwiXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50RW1iZWQuY3NzKHsncGFkZGluZy10b3AnOiAoZW1iZWRIL2VtYmVkVyoxMDApKyclJ30pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIExvYWQgYXBwcm9wcmlhdGUgZW1iZWRcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoY3VycmVudEVtYmVkVHlwZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJpbWFnZVwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBZGQgZW1iZWQgdHlwZSBjbGFzc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50RW1iZWQuYWRkQ2xhc3MoJ3BmLWVtYmVkLWltYWdlJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBcHBlbmQgZW1iZWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGltZyA9IGpRdWVyeSgnPGltZy8+Jyx7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcmM6IGN1cmVudEVtYmVkVXJsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU6ICdkaXNwbGF5Om5vbmUnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLmxvYWQoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpRdWVyeSh0aGlzKS5mYWRlSW4oNTAwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRFbWJlZC5hZGRDbGFzcygncGYtZW1iZWQtbG9hZGVkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLmVycm9yKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50RW1iZWQuYWRkQ2xhc3MoJ3BmLWVtYmVkLWVycm9yJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEVtYmVkLmVtcHR5KCkuYXBwZW5kKGltZyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImlmcmFtZVwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBZGQgZW1iZWQgdHlwZSBjbGFzc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50RW1iZWQuYWRkQ2xhc3MoJ3BmLWVtYmVkLWlmcmFtZScpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQXBwZW5kIEVtYmVkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpZnJhbWUgPSBqUXVlcnkoJzxpZnJhbWUvPicsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNyYzogY3VyZW50RW1iZWRVcmwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZTogJ2Rpc3BsYXk6bm9uZScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGxvd2Z1bGxzY3JlZW46ICcnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLmxvYWQoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpRdWVyeSh0aGlzKS5mYWRlSW4oNTAwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRFbWJlZC5hZGRDbGFzcygncGYtZW1iZWQtbG9hZGVkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLmVycm9yKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50RW1iZWQuYWRkQ2xhc3MoJ3BmLWVtYmVkLWVycm9yJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEVtYmVkLmVtcHR5KCkuYXBwZW5kKGlmcmFtZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcInZpZGVvXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFkZCBlbWJlZCB0eXBlIGNsYXNzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRFbWJlZC5hZGRDbGFzcygncGYtZW1iZWQtdmlkZW8nKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFwcGVuZCBFbWJlZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmlkZW9PcHRpb25zID0gdGhpcy5wYXJzZU9wdGlvbnMoY3VyZW50RW1iZWRVcmwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmlkZW8gPSAnPHZpZGVvICc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHZpZGVvT3B0aW9ucy5wb3N0ZXIpIHZpZGVvICs9ICdwb3N0ZXI9XCInK3ZpZGVvT3B0aW9ucy5wb3N0ZXIrJ1wiICc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZpZGVvICs9ICdjb250cm9scz1cImNvbnRyb2xzXCIgcHJlbG9hZD1cInllc1wiPic7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHZpZGVvT3B0aW9ucy5tcDQpIHZpZGVvICs9ICc8c291cmNlIHR5cGU9XCJ2aWRlby9tcDRcIiBzcmM9XCInK3ZpZGVvT3B0aW9ucy5tcDQrJ1wiLz4nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZih2aWRlb09wdGlvbnMud2VibSkgdmlkZW8gKz0gJzxzb3VyY2UgdHlwZT1cInZpZGVvL3dlYm1cIiBzcmM9XCInK3ZpZGVvT3B0aW9ucy53ZWJtKydcIi8+JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYodmlkZW9PcHRpb25zLm9ndikgdmlkZW8gKz0gJzxzb3VyY2UgdHlwZT1cInZpZGVvL29nZ1wiIHNyYz1cIicrdmlkZW9PcHRpb25zLm9ndisnXCIvPic7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZpZGVvICs9ICdZb3VyIGJyb3dzZXIgZG9lcyBub3Qgc3VwcG9ydCB0aGUgdmlkZW8gdGFnLjwvdmlkZW8+JztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRFbWJlZC5lbXB0eSgpLmFwcGVuZCggalF1ZXJ5KHZpZGVvKSApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIHBhcnNlT3B0aW9uczogZnVuY3Rpb24gKHN0cikge1xyXG4gICAgICAgIHZhciBvYmogPSB7fTtcclxuICAgICAgICB2YXIgZGVsaW1pdGVySW5kZXg7XHJcbiAgICAgICAgdmFyIG9wdGlvbjtcclxuICAgICAgICB2YXIgcHJvcDtcclxuICAgICAgICB2YXIgdmFsO1xyXG4gICAgICAgIHZhciBhcnI7XHJcbiAgICAgICAgdmFyIGxlbjtcclxuICAgICAgICB2YXIgaTtcclxuXHJcbiAgICAgICAgLy8gUmVtb3ZlIHNwYWNlcyBhcm91bmQgZGVsaW1pdGVycyBhbmQgc3BsaXRcclxuICAgICAgICBhcnIgPSBzdHIucmVwbGFjZSgvXFxzKjpcXHMqL2csICc6JykucmVwbGFjZSgvXFxzKixcXHMqL2csICcsJykuc3BsaXQoJywnKTtcclxuXHJcbiAgICAgICAgLy8gUGFyc2UgYSBzdHJpbmdcclxuICAgICAgICBmb3IgKGkgPSAwLCBsZW4gPSBhcnIubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcclxuICAgICAgICAgICAgb3B0aW9uID0gYXJyW2ldO1xyXG5cclxuICAgICAgICAgICAgLy8gSWdub3JlIHVybHMgYW5kIGEgc3RyaW5nIHdpdGhvdXQgY29sb24gZGVsaW1pdGVyc1xyXG4gICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICBvcHRpb24uc2VhcmNoKC9eKGh0dHB8aHR0cHN8ZnRwKTpcXC9cXC8vKSAhPT0gLTEgfHxcclxuICAgICAgICAgICAgICAgIG9wdGlvbi5zZWFyY2goJzonKSA9PT0gLTFcclxuICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZGVsaW1pdGVySW5kZXggPSBvcHRpb24uaW5kZXhPZignOicpO1xyXG4gICAgICAgICAgICBwcm9wID0gb3B0aW9uLnN1YnN0cmluZygwLCBkZWxpbWl0ZXJJbmRleCk7XHJcbiAgICAgICAgICAgIHZhbCA9IG9wdGlvbi5zdWJzdHJpbmcoZGVsaW1pdGVySW5kZXggKyAxKTtcclxuXHJcbiAgICAgICAgICAgIC8vIElmIHZhbCBpcyBhbiBlbXB0eSBzdHJpbmcsIG1ha2UgaXQgdW5kZWZpbmVkXHJcbiAgICAgICAgICAgIGlmICghdmFsKSB7XHJcbiAgICAgICAgICAgICAgICB2YWwgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIENvbnZlcnQgYSBzdHJpbmcgdmFsdWUgaWYgaXQgaXMgbGlrZSBhIGJvb2xlYW5cclxuICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICB2YWwgPSB2YWwgPT09ICd0cnVlJyB8fCAodmFsID09PSAnZmFsc2UnID8gZmFsc2UgOiB2YWwpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBDb252ZXJ0IGEgc3RyaW5nIHZhbHVlIGlmIGl0IGlzIGxpa2UgYSBudW1iZXJcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICB2YWwgPSAhaXNOYU4odmFsKSA/ICt2YWwgOiB2YWw7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIG9ialtwcm9wXSA9IHZhbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIElmIG5vdGhpbmcgaXMgcGFyc2VkXHJcbiAgICAgICAgaWYgKHByb3AgPT0gbnVsbCAmJiB2YWwgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICByZXR1cm4gc3RyO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIG9iajtcclxuICAgIH1cclxufTtcclxuIiwiKGZ1bmN0aW9uICgkKSB7XHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbiAgICAkKGZ1bmN0aW9uICgpIHsgLy8gc3RhcnQ6IGRvY3VtZW50IHJlYWR5XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqICBTZXQgR2xvYmFsIFZhcnNcclxuICAgICAgICAgKi9cclxuICAgICAgICBjZXJ0eS5pbml0R2xvYmFsVmFycygpO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiAgTmF2aWdhdGlvblxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGlmIChjZXJ0eS52YXJzLmJvZHkuaGFzQ2xhc3MoJ2NydC1uYXYtb24nKSkgeyAvLyBDaGVjayBJZiBOYXYgRXhpc3RzXHJcbiAgICAgICAgICAgIC8vIFNjcm9sbGVkIE5hdmlnYXRpb24gKCBsYXJnZSBzY3JlZW5zIClcclxuICAgICAgICAgICAgaWYgKCBNb2Rlcm5penIubXEoJyhtaW4td2lkdGg6ICcrY2VydHkudmFycy5zY3JlZW5NZCsnKScpICYmIGNlcnR5Lm5hdi5oZWlnaHQgIT09ICdhdXRvJyApIHtcclxuICAgICAgICAgICAgICAgIGNlcnR5Lm5hdi5pbml0U2Nyb2xsKCAkKCcjY3J0LW5hdi1zY3JvbGwnKSApO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBTdGlja3kgTmF2aWdhdGlvblxyXG4gICAgICAgICAgICBjZXJ0eS5uYXYubWFrZVN0aWNreSgpO1xyXG5cclxuICAgICAgICAgICAgLy8gTmF2aWdhdGlvbiBUb29sdGlwc1xyXG4gICAgICAgICAgICBpZihjZXJ0eS5uYXYudG9vbHRpcC5hY3RpdmUpe1xyXG4gICAgICAgICAgICAgICAgJCgnI2NydC1uYXYgYScpLmhvdmVyKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBjZXJ0eS5uYXYudG9vbHRpcC5zaG93KCAkKHRoaXMpICk7XHJcbiAgICAgICAgICAgICAgICB9LGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBjZXJ0eS5uYXYudG9vbHRpcC5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8vIEFuY2hvciBOYXZpZ2F0aW9uXHJcbiAgICAgICAgICAgICQoJyNjcnQtbmF2Jykub25lUGFnZU5hdih7XHJcbiAgICAgICAgICAgICAgICBjaGFuZ2VIYXNoOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgc2Nyb2xsVGhyZXNob2xkOiAwLjUsXHJcbiAgICAgICAgICAgICAgICBmaWx0ZXI6ICc6bm90KC5leHRlcm5hbCknXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogIEZpeGVkIFNpZGUgQm94XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgY2VydHkuc2lkZUJveC5tYWtlU3RpY2t5KCk7XHJcblxyXG4gICAgICAgIC8qKiBQb3J0Zm9saW8gKi9cclxuICAgICAgICB2YXIgcGZfZ3JpZCA9ICQoJy5wZi1ncmlkJyk7XHJcblxyXG4gICAgICAgIC8vIGNoZWNrIGlmIGdyaWQgZXhpc3RzIHRoYW4gZG8gYWN0aW9uXHJcbiAgICAgICAgaWYgKHBmX2dyaWQubGVuZ3RoID4gMCkge1xyXG5cclxuICAgICAgICAgICAgLy8gaW5pdCBwb3J0Zm9saW8gZ3JpZFxyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBmX2dyaWQubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGNlcnR5LnBvcnRmb2xpby5pbml0R3JpZCggJChwZl9ncmlkW2ldKSApO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBvcGVuIHBvcnRmb2xpbyBwb3B1cFxyXG4gICAgICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLnBmLXByb2plY3QnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHZhciBpZCA9ICQodGhpcykuYXR0cignaHJlZicpO1xyXG5cclxuICAgICAgICAgICAgICAgIGNlcnR5LnBvcnRmb2xpby5vcGVuUG9wdXAoICQoaWQpICk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcucGYtcmVsLWhyZWYnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHZhciBocmVmID0gJCh0aGlzKS5hdHRyKCdocmVmJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gaWYgY29udGFpbiBhbmNob3IsIG9wZW4gcHJvamVjdCBwb3B1cFxyXG4gICAgICAgICAgICAgICAgaWYoIGhyZWYuaW5kZXhPZihcIiNcIikgIT0gLTEgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY2xvc2UgYWxyZWFkeSBvcGVuZWQgcG9wdXBcclxuICAgICAgICAgICAgICAgICAgICBjZXJ0eS5wb3J0Zm9saW8uY2xvc2VQb3B1cCgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBvcGVuIG5ldyBvbmUgYWZ0ZXIgdGltZW91dFxyXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2VydHkucG9ydGZvbGlvLm9wZW5Qb3B1cCggJChocmVmKSApO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sIDUwMCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblx0XHRcdFxyXG5cdFx0XHQkKGRvY3VtZW50KS5vbignY2xpY2snLCAnI3BmLXBvcHVwLWNsb3NlJywgZnVuY3Rpb24oKSB7XHRcdFx0XHRcclxuICAgICAgICAgICAgICAgIGNlcnR5LnBvcnRmb2xpby5jbG9zZVBvcHVwKCk7XHJcblx0XHRcdH0pO1xyXG5cclxuICAgICAgICAgICAgLy8gY2xvc2UgcG9ydGZvbGlvIHBvcHVwXHJcbiAgICAgICAgICAgICQoZG9jdW1lbnQpLm9uKCd0b3VjaHN0YXJ0IGNsaWNrJywgJy5jcnQtcGYtcG9wdXAtb3BlbmVkICNwZi1wb3B1cC13cmFwJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgICAgIHZhciBjb250YWluZXIgPSAkKCcjcGYtcG9wdXAtY29udGVudCcpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIGlmIHRoZSB0YXJnZXQgb2YgdGhlIGNsaWNrIGlzbid0IHRoZSBjb250YWluZXIuLi4gbm9yIGEgZGVzY2VuZGFudCBvZiB0aGUgY29udGFpbmVyXHJcbiAgICAgICAgICAgICAgICBpZiAoIWNvbnRhaW5lci5pcyhlLnRhcmdldCkgJiYgY29udGFpbmVyLmhhcyhlLnRhcmdldCkubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2VydHkucG9ydGZvbGlvLmNsb3NlUG9wdXAoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKiogQ29tcG9uZW50cyAqL1xyXG4gICAgICAgIC8vIGluaXQgc2xpZGVyc1xyXG4gICAgICAgIGNlcnR5LnNsaWRlciggJChcIi5jci1zbGlkZXJcIikgKTtcclxuXHJcbiAgICAgICAgLy8gaW5pdCBjYXJvdXNlbFxyXG4gICAgICAgIGNlcnR5LmNhcm91c2VsKCAkKFwiLmNyLWNhcm91c2VsXCIpICk7XHJcblx0XHRcclxuXHRcdC8qKiBXaW5kb3cgU2Nyb2xsIFRvcCBCdXR0b24gKi9cclxuICAgICAgICB2YXIgJGJ0blNjcm9sbFRvcCA9ICQoJyNjcnQtYnRuLXVwJyk7XHJcblx0XHRcclxuXHRcdGlmKCRidG5TY3JvbGxUb3AubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBpZiAoJCh3aW5kb3cpLnNjcm9sbFRvcCgpID4gMTAwKSB7XHJcbiAgICAgICAgICAgICAgICAkYnRuU2Nyb2xsVG9wLnNob3coMCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkYnRuU2Nyb2xsVG9wLmhpZGUoMCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcblx0XHRcdCQod2luZG93KS5zY3JvbGwoZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRcdGlmICgkKHRoaXMpLnNjcm9sbFRvcCgpID4gMTAwKSB7XHJcblx0XHRcdFx0XHQkYnRuU2Nyb2xsVG9wLnNob3coMCk7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdCRidG5TY3JvbGxUb3AuaGlkZSgwKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0JGJ0blNjcm9sbFRvcC5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdFx0JCgnaHRtbCwgYm9keScpLmFuaW1hdGUoe3Njcm9sbFRvcDogMH0sIDgwMCk7XHJcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuICAgIH0pOyAvLyBlbmQ6IGRvY3VtZW50IHJlYWR5XHJcblxyXG5cclxuXHJcbiAgICAkKHdpbmRvdykub24oJ3Jlc2l6ZScsIGZ1bmN0aW9uICgpIHsgLy8gc3RhcnQ6IHdpbmRvdyByZXNpemVcclxuXHJcbiAgICAgICAgLy8gUmUgSW5pdCBWYXJzXHJcbiAgICAgICAgY2VydHkudmFycy53aW5kb3dXID0gJCh3aW5kb3cpLndpZHRoKCk7XHJcbiAgICAgICAgY2VydHkudmFycy53aW5kb3dIID0gJCh3aW5kb3cpLmhlaWdodCgpO1xyXG4gICAgICAgIGNlcnR5LnZhcnMud2luZG93U2Nyb2xsVG9wID0gJCh3aW5kb3cpLnNjcm9sbFRvcCgpO1xyXG5cclxuICAgICAgICAvLyBTdGlja3kgTmF2aWdhdGlvblxyXG4gICAgICAgIGNlcnR5Lm5hdi5tYWtlU3RpY2t5KCk7XHJcblxyXG4gICAgICAgIC8vIFN0aWNreSBTaWRlIEJveFxyXG4gICAgICAgIGNlcnR5LnNpZGVCb3gubWFrZVN0aWNreSgpO1xyXG5cclxuICAgIH0pOyAvLyBlbmQ6IHdpbmRvdyByZXNpemVcclxuXHJcblxyXG5cclxuICAgICQod2luZG93KS5vbignc2Nyb2xsJywgZnVuY3Rpb24gKCkgeyAvLyBzdGFydDogd2luZG93IHNjcm9sbFxyXG5cclxuICAgICAgICAvLyBSZSBJbml0IFZhcnNcclxuICAgICAgICBjZXJ0eS52YXJzLndpbmRvd1Njcm9sbFRvcCA9ICQod2luZG93KS5zY3JvbGxUb3AoKTtcclxuXHJcbiAgICAgICAgLy8gU3RpY2t5IE5hdmlnYXRpb25cclxuICAgICAgICBjZXJ0eS5uYXYubWFrZVN0aWNreSgpO1xyXG5cclxuICAgICAgICAvLyBTdGlja3kgU2lkZSBCb3hcclxuICAgICAgICBjZXJ0eS5zaWRlQm94Lm1ha2VTdGlja3koKTtcclxuXHJcbiAgICAgICAgLy8gUmVtb3ZlIFRvb2x0aXBcclxuICAgICAgICBpZihjZXJ0eS5uYXYudG9vbHRpcC5lbC5sZW5ndGggPiAwKXtcclxuICAgICAgICAgICAgY2VydHkubmF2LnRvb2x0aXAuZWwucmVtb3ZlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH0pOyAvLyBlbmQ6IHdpbmRvdyBzY3JvbGxcclxuXHJcblxyXG5cclxuICAgICQod2luZG93KS5vbignbG9hZCcsIGZ1bmN0aW9uICgpIHsgLy8gc3RhcnQ6IHdpbmRvdyBsb2FkXHJcblxyXG4gICAgfSk7IC8vIGVuZDogd2luZG93IGxvYWRcclxuXHJcbn0pKGpRdWVyeSk7IiwiLy8gVGhlbWUgVmFyaWFibGVzXHJcbnZhciBhY2UgPSB7XHJcbiAgICBodG1sOiAnJyxcclxuICAgIGJvZHk6ICcnLFxyXG4gICAgbW9iaWxlOiAnJyxcclxuXHJcbiAgICBzaWRlYmFyOiB7XHJcbiAgICAgICAgb2JqOiAnJyxcclxuICAgICAgICBidG46ICcnXHJcbiAgICB9LFxyXG5cclxuICAgIG5hdjoge1xyXG4gICAgICAgIG9iajogJycsXHJcbiAgICAgICAgdG9vbHRpcDogalF1ZXJ5KCc8ZGl2IGNsYXNzPVwiY3J0LXRvb2x0aXBcIj48L2Rpdj4nKVxyXG4gICAgfSxcclxuXHJcbiAgICBvdmVybGF5OiB7XHJcbiAgICAgICAgb2JqOiBqUXVlcnkoJzxkaXYgaWQ9XCJjcnQtb3ZlcmxheVwiPjwvZGl2PicpXHJcbiAgICB9LFxyXG5cclxuICAgIHByb2dyZXNzOiB7XHJcbiAgICAgICAgbGluZXM6ICcnLFxyXG4gICAgICAgIGNoYXJ0czogJycsXHJcbiAgICAgICAgYnVsbGV0czogJydcclxuICAgIH1cclxufTtcclxuXHJcbihmdW5jdGlvbiAoJCkge1xyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcblx0XHJcblx0JChmdW5jdGlvbiAoKSB7IC8vIHN0YXJ0OiBkb2N1bWVudCByZWFkeVxyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogQ2VydHkgSW5pdCBNYWluIFZhcnNcclxuXHRcdCAqL1xyXG5cdFx0YWNlLmh0bWwgPSAkKCdodG1sJyk7XHJcblx0XHRhY2UuYm9keSA9ICQoJ2JvZHknKTtcclxuXHJcblx0XHQvKipcclxuXHRcdCAqIENlcnR5IERldGVjdCBEZXZpY2UgVHlwZVxyXG5cdFx0ICovXHJcblx0XHRhY2VfZGV0ZWN0X2RldmljZV90eXBlKCk7XHJcblxyXG5cdFx0LyoqXHJcblx0XHQgKiBDZXJ0eSBNb2JpbGUgTmF2aWdhdGlvblxyXG5cdFx0ICovXHJcblx0XHQkKCcjY3J0LW1haW4tbmF2LXNtIC5tZW51LWl0ZW0taGFzLWNoaWxkcmVuID4gYScpLm9uKCdjbGljayB0b3VjaHN0YXJ0JywgZnVuY3Rpb24oKXtcclxuXHRcdFx0aWYoICQodGhpcykuaGFzQ2xhc3MoJ2hvdmVyJykgKXtcclxuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQkKHRoaXMpLmFkZENsYXNzKCdob3ZlcicpO1xyXG5cdFx0XHRcdCQodGhpcykubmV4dCgpLnNsaWRlRG93big1MDApO1xyXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0LyoqXHJcblx0XHQgKiBDZXJ0eSBTaWRlYmFyXHJcblx0XHQgKi9cclxuXHRcdGFjZS5zaWRlYmFyLm9iaiA9ICQoJyNjcnQtc2lkZWJhcicpO1xyXG5cdFx0YWNlLnNpZGViYXIuYnRuID0gJCgnI2NydC1zaWRlYmFyLWJ0bicpO1xyXG5cclxuXHRcdC8vIE9wZW4gU2lkZWJhclxyXG5cdFx0YWNlLnNpZGViYXIuYnRuLm9uKCd0b3VjaHN0YXJ0IGNsaWNrJywgZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRhY2Vfb3Blbl9zaWRlYmFyKCk7XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBDbG9zZSBTaWRlYmFyIFRocm91Z2ggT3ZlcmxheVxyXG5cdFx0JChkb2N1bWVudCkub24oJ3RvdWNoc3RhcnQgY2xpY2snLCAnLmNydC1zaWRlYmFyLW9wZW5lZCAjY3J0LW92ZXJsYXknLCBmdW5jdGlvbiAoZSkge1xyXG5cdFx0XHR2YXIgY29udGFpbmVyID0gYWNlLnNpZGViYXIub2JqO1xyXG5cdFx0XHQvLyBpZiB0aGUgdGFyZ2V0IG9mIHRoZSBjbGljayBpc24ndCB0aGUgY29udGFpbmVyLi4uIG5vciBhIGRlc2NlbmRhbnQgb2YgdGhlIGNvbnRhaW5lclxyXG5cdFx0XHRpZiAoIWNvbnRhaW5lci5pcyhlLnRhcmdldCkgJiYgY29udGFpbmVyLmhhcyhlLnRhcmdldCkubGVuZ3RoID09PSAwKSB7XHJcblx0XHRcdFx0YWNlX2Nsb3NlX3NpZGViYXIoKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gQ2xvc2UgU2lkZWJhciBVc2luZyBCdXR0b25cclxuXHRcdCQoJyNjcnQtc2lkZWJhci1jbG9zZScpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0YWNlX2Nsb3NlX3NpZGViYXIoKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIFNpZGViYXIgQ3VzdG9tIFNjcm9sbFxyXG5cdFx0JChcIiNjcnQtc2lkZWJhci1pbm5lclwiKS5tQ3VzdG9tU2Nyb2xsYmFyKHtcclxuXHRcdFx0YXhpczogXCJ5XCIsXHJcblx0XHRcdHRoZW1lOiBcIm1pbmltYWwtZGFya1wiLFxyXG5cdFx0XHRhdXRvSGlkZVNjcm9sbGJhcjogdHJ1ZSxcclxuXHRcdFx0c2Nyb2xsQnV0dG9uczogeyBlbmFibGU6IHRydWUgfVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0LyoqXHJcblx0XHQgKiBDZXJ0eSBDaXJjbGUgJiBMaW5lIENoYXJ0c1xyXG5cdFx0ICovXHJcblx0XHRpZighY2VydHkucHJvZ3Jlc3MuYW5pbWF0aW9uIHx8IGFjZS5tb2JpbGUpIHtcclxuXHRcdFx0Ly8gQ2lyY2xlIENoYXJ0XHJcblx0XHRcdGFjZS5wcm9ncmVzcy5jaGFydHMgPSAkKCcucHJvZ3Jlc3MtY2hhcnQgLnByb2dyZXNzLWJhcicpO1xyXG5cdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGFjZS5wcm9ncmVzcy5jaGFydHMubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0XHR2YXIgY2hhcnQgPSAkKGFjZS5wcm9ncmVzcy5jaGFydHNbaV0pO1xyXG5cclxuXHRcdFx0XHRhY2VfcHJvZ3Jlc3NfY2hhcnQoY2hhcnRbMF0sIGNoYXJ0LmRhdGEoJ3RleHQnKSwgY2hhcnQuZGF0YSgndmFsdWUnKSwgMSk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIExpbmUgQ2hhcnRcclxuXHRcdFx0YWNlLnByb2dyZXNzLmxpbmVzID0gJCgnLnByb2dyZXNzLWxpbmUgLnByb2dyZXNzLWJhcicpO1xyXG5cdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGFjZS5wcm9ncmVzcy5saW5lcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRcdHZhciBsaW5lID0gJChhY2UucHJvZ3Jlc3MubGluZXNbaV0pO1xyXG5cclxuXHRcdFx0XHRhY2VfcHJvZ3Jlc3NfbGluZShsaW5lWzBdLCBsaW5lLmRhdGEoJ3RleHQnKSwgbGluZS5kYXRhKCd2YWx1ZScpLCAxKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogQ2VydHkgQW5pbWF0ZSBFbGVtZW50c1xyXG5cdFx0ICovXHJcblx0XHRpZihjZXJ0eS5wcm9ncmVzcy5hbmltYXRpb24gJiYgIWFjZS5tb2JpbGUpIHtcclxuXHRcdFx0YWNlX2FwcGVhcl9lbGVtcygkKCcuY3J0LWFuaW1hdGUnKSwgMCk7XHJcblx0XHR9XHJcblxyXG5cdFx0LyoqXHJcblx0XHQgKiBDb2RlIEhpZ2hsaWdodFxyXG5cdFx0ICovXHJcblx0XHQkKCdwcmUnKS5lYWNoKGZ1bmN0aW9uIChpLCBibG9jaykge1xyXG5cdFx0XHRobGpzLmhpZ2hsaWdodEJsb2NrKGJsb2NrKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogQ2VydHkgQWxlcnRzXHJcblx0XHQgKi9cclxuXHRcdCQoJy5hbGVydCAuY2xvc2UnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdHZhciBhbGVydCA9ICQodGhpcykucGFyZW50KCk7XHJcblxyXG5cdFx0XHRhbGVydC5mYWRlT3V0KDUwMCwgZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRcdGFsZXJ0LnJlbW92ZSgpO1xyXG5cdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogQ2VydHkgU2xpZGVyXHJcblx0XHQgKi9cclxuXHRcdCQoJy5zbGlkZXInKS5zbGljayh7XHJcblx0XHRcdGRvdHM6IHRydWVcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogQ2VydHkgR29vZ2xlIE1hcCBJbml0aWFsaXNhdGlvblxyXG5cdFx0ICovXHJcblx0XHRpZiAoJCgnI21hcCcpLmxlbmd0aCA+IDApIHtcclxuXHRcdFx0aW5pdGlhbGlzZUdvb2dsZU1hcCggY2VydHlfdmFyc19mcm9tX1dQLm1hcFN0eWxlcyApO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogIFRhYnNcclxuXHRcdCAqL1xyXG5cdFx0dmFyIHRhYkFjdGl2ZSA9ICQoJy50YWJzLW1lbnU+bGkuYWN0aXZlJyk7XHJcblx0XHRpZiggdGFiQWN0aXZlLmxlbmd0aCA+IDAgKXtcclxuXHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCB0YWJBY3RpdmUubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0XHR2YXIgdGFiX2lkID0gJCh0YWJBY3RpdmVbaV0pLmNoaWxkcmVuKCkuYXR0cignaHJlZicpO1xyXG5cclxuXHRcdFx0XHQkKHRhYl9pZCkuYWRkQ2xhc3MoJ2FjdGl2ZScpLnNob3coKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdCQoJy50YWJzLW1lbnUgYScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpe1xyXG5cdFx0XHR2YXIgdGFiID0gJCh0aGlzKTtcclxuXHRcdFx0dmFyIHRhYl9pZCA9IHRhYi5hdHRyKCdocmVmJyk7XHJcblx0XHRcdHZhciB0YWJfd3JhcCA9IHRhYi5jbG9zZXN0KCcudGFicycpO1xyXG5cdFx0XHR2YXIgdGFiX2NvbnRlbnQgPSB0YWJfd3JhcC5maW5kKCcudGFiLWNvbnRlbnQnKTtcclxuXHJcblx0XHRcdHRhYi5wYXJlbnQoKS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcclxuXHRcdFx0dGFiLnBhcmVudCgpLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG5cdFx0XHR0YWJfY29udGVudC5ub3QodGFiX2lkKS5yZW1vdmVDbGFzcygnYWN0aXZlJykuaGlkZSgpO1xyXG5cdFx0XHQkKHRhYl9pZCkuYWRkQ2xhc3MoJ2FjdGl2ZScpLmZhZGVJbig1MDApO1xyXG5cclxuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0LyoqXHJcblx0XHQgKiBUb2dnbGVCb3hcclxuXHRcdCAqL1xyXG5cdFx0dmFyIHRvZ2dsZWJveEFjdGl2ZSA9ICQoJy50b2dnbGVib3g+bGkuYWN0aXZlJyk7XHJcblx0XHRpZiggdG9nZ2xlYm94QWN0aXZlLmxlbmd0aCA+IDAgKXtcclxuXHRcdFx0dG9nZ2xlYm94QWN0aXZlLmZpbmQoJy50b2dnbGVib3gtY29udGVudCcpLnNob3coKTtcclxuXHRcdH1cclxuXHJcblx0XHQkKCcudG9nZ2xlYm94LWhlYWRlcicpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCl7XHJcblx0XHRcdHZhciB0b2dnbGVfaGVhZCA9ICQodGhpcyk7XHJcblxyXG5cdFx0XHR0b2dnbGVfaGVhZC5uZXh0KCcudG9nZ2xlYm94LWNvbnRlbnQnKS5zbGlkZVRvZ2dsZSgzMDApO1xyXG5cdFx0XHR0b2dnbGVfaGVhZC5wYXJlbnQoKS50b2dnbGVDbGFzcygnYWN0aXZlJyk7XHJcblx0XHR9KTtcclxuXHJcblxyXG5cdFx0LyoqXHJcblx0XHQgKiBBY2NvcmRlb25cclxuXHRcdCAqL1xyXG5cdFx0dmFyIGFjY29yZGVvbkFjdGl2ZSA9ICQoJy5hY2NvcmRpb24+bGkuYWN0aXZlJyk7XHJcblx0XHRpZiggYWNjb3JkZW9uQWN0aXZlLmxlbmd0aCA+IDAgKXtcclxuXHRcdFx0YWNjb3JkZW9uQWN0aXZlLmZpbmQoJy5hY2NvcmRpb24tY29udGVudCcpLnNob3coKTtcclxuXHRcdH1cclxuXHJcblx0XHQkKCcuYWNjb3JkaW9uLWhlYWRlcicpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCl7XHJcblx0XHRcdHZhciBhY2NfaGVhZCA9ICQodGhpcyk7XHJcblx0XHRcdHZhciBhY2Nfc2VjdGlvbiA9IGFjY19oZWFkLnBhcmVudCgpO1xyXG5cdFx0XHR2YXIgYWNjX2NvbnRlbnQgPSBhY2NfaGVhZC5uZXh0KCk7XHJcblx0XHRcdHZhciBhY2NfYWxsX2NvbnRlbnRzID0gYWNjX2hlYWQuY2xvc2VzdCgnLmFjY29yZGlvbicpLmZpbmQoJy5hY2NvcmRpb24tY29udGVudCcpO1xyXG5cclxuXHRcdFx0aWYoYWNjX3NlY3Rpb24uaGFzQ2xhc3MoJ2FjdGl2ZScpKXtcclxuXHRcdFx0XHRhY2Nfc2VjdGlvbi5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcblx0XHRcdFx0YWNjX2NvbnRlbnQuc2xpZGVVcCgpO1xyXG5cdFx0XHR9ZWxzZXtcclxuXHRcdFx0XHRhY2Nfc2VjdGlvbi5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuXHRcdFx0XHRhY2Nfc2VjdGlvbi5hZGRDbGFzcygnYWN0aXZlJyk7XHJcblx0XHRcdFx0YWNjX2FsbF9jb250ZW50cy5zbGlkZVVwKDMwMCk7XHJcblx0XHRcdFx0YWNjX2NvbnRlbnQuc2xpZGVEb3duKDMwMCk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogQ29tbWVudHMgT3Blbi9DbG9zZVxyXG5cdFx0ICovXHJcblx0XHQkKCcuY29tbWVudC1yZXBseXMtbGluaycpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCl7XHJcblx0XHRcdCQodGhpcykuY2xvc2VzdCgnLmNvbW1lbnQnKS50b2dnbGVDbGFzcygnc2hvdy1yZXBsaWVzJyk7XHJcblxyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9KTtcclxuXHJcblx0XHQvKipcclxuXHRcdCAqIFBvcnRmb2xpbyBQb3B1cFxyXG5cdFx0ICovXHJcblx0XHR2YXIgcGZfcG9wdXAgPSB7fTtcclxuXHRcdHBmX3BvcHVwLndyYXBwZXIgPSBudWxsO1xyXG5cdFx0cGZfcG9wdXAuY29udGVudCA9IG51bGw7XHJcblx0XHRwZl9wb3B1cC5zbGlkZXIgPSBudWxsO1xyXG5cclxuXHRcdHBmX3BvcHVwLm9wZW4gPSBmdW5jdGlvbiAoIGVsICl7XHJcblx0XHRcdC8vIEFwcGVuZCBQb3J0Zm9saW8gUG9wdXBcclxuXHRcdFx0dGhpcy53cmFwcGVyID0gJCgnPGRpdiBpZD1cInBmLXBvcHVwLXdyYXBcIiBjbGFzcz1cInBmLXBvcHVwLXdyYXBcIj4nK1xyXG5cdFx0XHQnPGRpdiBjbGFzcz1cInBmLXBvcHVwLWlubmVyXCI+JytcclxuXHRcdFx0JzxkaXYgY2xhc3M9XCJwZi1wb3B1cC1taWRkbGVcIj4nK1xyXG5cdFx0XHQnPGRpdiBjbGFzcz1cInBmLXBvcHVwLWNvbnRhaW5lclwiPicrXHJcblx0XHRcdCc8YnV0dG9uIGlkPVwicGYtcG9wdXAtY2xvc2VcIj48aSBjbGFzcz1cInJzaWNvbiByc2ljb24tY2xvc2VcIj48L2k+PC9idXR0b24+JytcclxuXHRcdFx0JzxkaXYgaWQ9XCJwZi1wb3B1cC1jb250ZW50XCIgY2xhc3M9XCJwZi1wb3B1cC1jb250ZW50XCI+PC9kaXY+JytcclxuXHRcdFx0JzwvZGl2PicrXHJcblx0XHRcdCc8L2Rpdj4nK1xyXG5cdFx0XHQnPC9kaXY+Jyk7XHJcblxyXG5cdFx0XHRhY2UuYm9keS5hcHBlbmQodGhpcy53cmFwcGVyKTtcclxuXHJcblx0XHRcdC8vIEFkZCBQb3J0Zm9saW8gUG9wdXAgSXRlbXNcclxuXHRcdFx0dGhpcy5jb250ZW50ID0gJCgnI3BmLXBvcHVwLWNvbnRlbnQnKTtcclxuXHRcdFx0dGhpcy5jb250ZW50LmFwcGVuZCggZWwuY2xvbmUoKSApO1xyXG5cclxuXHRcdFx0Ly8gTWFrZSBQb3J0Zm9saW8gUG9wdXAgVmlzaWJsZVxyXG5cdFx0XHRwZl9wb3B1cC53cmFwcGVyLmFkZENsYXNzKCdvcGVuZWQnKTtcclxuXHRcdFx0YWNlX2xvY2tfc2Nyb2xsKCk7XHJcblx0XHR9O1xyXG5cclxuXHRcdHBmX3BvcHVwLmNsb3NlID0gZnVuY3Rpb24oKXtcclxuXHRcdFx0dGhpcy53cmFwcGVyLnJlbW92ZUNsYXNzKCdvcGVuZWQnKTtcclxuXHRcdFx0c2V0VGltZW91dChmdW5jdGlvbigpe1xyXG5cdFx0XHRcdHBmX3BvcHVwLndyYXBwZXIucmVtb3ZlKCk7XHJcblx0XHRcdFx0YWNlX3VubG9ja19zY3JvbGwoKTtcclxuXHRcdFx0fSwgNTAwKTtcclxuXHRcdH07XHJcblxyXG5cdFx0Ly8gT3BlbiBQb3J0Zm9saW8gUG9wdXBcclxuXHRcdCQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcucGYtYnRuLXZpZXcnLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyIGlkID0gJCh0aGlzKS5hdHRyKCdocmVmJyk7XHJcblx0XHRcdHBmX3BvcHVwLm9wZW4oICQoaWQpICk7XHJcblxyXG5cdFx0XHRhY2UuaHRtbC5hZGRDbGFzcygnY3J0LXBvcnRmb2xpby1vcGVuZWQnKTtcclxuXHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIENsb3NlIFBvcnRmb2xpbyBQb3B1cFxyXG5cdFx0JChkb2N1bWVudCkub24oJ3RvdWNoc3RhcnQgY2xpY2snLCAnLmNydC1wb3J0Zm9saW8tb3BlbmVkICNwZi1wb3B1cC13cmFwJywgZnVuY3Rpb24gKGUpIHtcclxuXHRcdFx0dmFyIGNvbnRhaW5lciA9ICQoJyNwZi1wb3B1cC1jb250ZW50Jyk7XHJcblxyXG5cdFx0XHQvLyBpZiB0aGUgdGFyZ2V0IG9mIHRoZSBjbGljayBpc24ndCB0aGUgY29udGFpbmVyLi4uIG5vciBhIGRlc2NlbmRhbnQgb2YgdGhlIGNvbnRhaW5lclxyXG5cdFx0XHRpZiAoIWNvbnRhaW5lci5pcyhlLnRhcmdldCkgJiYgY29udGFpbmVyLmhhcyhlLnRhcmdldCkubGVuZ3RoID09PSAwKSB7XHJcblx0XHRcdFx0cGZfcG9wdXAuY2xvc2UoKTtcclxuXHRcdFx0XHRhY2UuaHRtbC5yZW1vdmVDbGFzcygnY3J0LXBvcnRmb2xpby1vcGVuZWQnKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0LyoqXHJcblx0XHQgKiBTaG93IENvZGUgPHByZT5cclxuXHRcdCAqL1xyXG5cdFx0JCgnLnRvZ2dsZS1saW5rJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKXtcclxuXHRcdFx0dmFyIGlkID0gJCh0aGlzKS5hdHRyKCdocmVmJyk7XHJcblxyXG5cdFx0XHRpZigkKHRoaXMpLmhhc0NsYXNzKCdvcGVuZWQnKSl7XHJcblx0XHRcdFx0JChpZCkuc2xpZGVVcCg1MDApO1xyXG5cdFx0XHRcdCQodGhpcykucmVtb3ZlQ2xhc3MoJ29wZW5lZCcpO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdCQoaWQpLnNsaWRlRG93big1MDApO1xyXG5cdFx0XHRcdCQodGhpcykuYWRkQ2xhc3MoJ29wZW5lZCcpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9KTtcclxuXHJcblx0XHQvKipcclxuXHRcdCAqIFNoYXJlIEJ1dHRvblxyXG5cdFx0ICovXHJcblx0XHQkKCcuc2hhcmUtYnRuJykub24oIFwibW91c2VlbnRlclwiLCBmdW5jdGlvbigpe1xyXG5cdFx0XHQkKHRoaXMpLnBhcmVudCgpLmFkZENsYXNzKCdob3ZlcmVkJyk7XHJcblx0XHR9KTtcclxuXHJcblx0XHQkKCcuc2hhcmUtYm94Jykub24oIFwibW91c2VsZWF2ZVwiLCBmdW5jdGlvbigpe1xyXG5cdFx0XHR2YXIgc2hhcmVfYm94ID0gJCh0aGlzKTtcclxuXHJcblx0XHRcdGlmKHNoYXJlX2JveC5oYXNDbGFzcygnaG92ZXJlZCcpKXtcclxuXHRcdFx0XHRzaGFyZV9ib3guYWRkQ2xhc3MoJ2Nsb3NpbmcnKTtcclxuXHRcdFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0c2hhcmVfYm94LnJlbW92ZUNsYXNzKCdob3ZlcmVkJyk7XHJcblx0XHRcdFx0XHRzaGFyZV9ib3gucmVtb3ZlQ2xhc3MoJ2Nsb3NpbmcnKTtcclxuXHRcdFx0XHR9LDMwMCk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cclxuXHR9KTsgLy8gZW5kOiBkb2N1bWVudCByZWFkeVxyXG59KShqUXVlcnkpOyJdfQ==
